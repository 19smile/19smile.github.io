"use strict";(self["webpackChunktenant_portal"]=self["webpackChunktenant_portal"]||[]).push([[557],{8557:function(t,e,s){s.r(e),s.d(e,{default:function(){return g}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("van-sticky",{attrs:{"offset-top":48}},[e("van-row",{staticClass:"select-box",attrs:{gutter:"6"}},[e("van-col",{attrs:{span:"12"}},[e("span",{on:{click:function(e){t.show=!0}}},[t._v("Select BU |")]),e("span",{staticClass:"ml-8",on:{click:function(e){t.show=!0}}},[t._v(t._s(t.selBu))]),e("img",{attrs:{width:"24px",src:s(597)},on:{click:function(e){t.show=!0}}})]),e("van-col",{staticClass:"justify-end",attrs:{span:"12"}},[e("div",{staticClass:"sel-month"},[e("span",{on:{click:function(e){t.showMonth=!0}}},[t._v(t._s(t.selMonth))]),e("img",{attrs:{width:"24px",src:s(597)},on:{click:function(e){t.showMonth=!0}}})])])],1)],1),e("van-action-sheet",{attrs:{title:"Select BU",round:!1,actions:t.buList},on:{select:t.onSelect},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}}),e("van-action-sheet",{attrs:{round:!1},model:{value:t.showMonth,callback:function(e){t.showMonth=e},expression:"showMonth"}},[e("van-datetime-picker",{attrs:{type:"year-month",formatter:t.formatter},on:{confirm:t.confirm,cancel:function(e){t.showMonth=!1}},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1),e("div",{staticClass:"content-items"},[e("div",{staticClass:"content-items-content"},[t._m(0),e("van-row",{attrs:{gutter:"16"}},[e("van-col",{staticClass:"in-post-left",attrs:{span:"8"}},[e("div",{staticClass:"in-post-items"},[e("div",{staticClass:"text-center"},[e("p",[t._v("Vacancy")]),e("p",{staticClass:"text-yellow number"},[t._v(t._s(t.vacancy))])])]),e("div",{staticClass:"in-post-items"},[e("div",{staticClass:"text-center"},[e("p",[t._v("Recruited")]),e("p",{staticClass:"text-blue number"},[t._v(t._s(t.recruited))])])]),e("div",{staticClass:"in-post-items"},[e("div",{staticClass:"text-center"},[e("p",[t._v("Remain")]),e("p",{staticClass:"text-blue2 number"},[t._v(t._s(t.remain))])])])]),e("van-col",{staticClass:"in-post-right",attrs:{span:"16"}},[e("div",{staticClass:"recruitment-content"},[e("div",{staticClass:"justify-center"},[e("div",{attrs:{id:"recruitment"}})])])])],1)],1)]),t._m(1),e("div",{staticClass:"content-items"},[e("div",{staticClass:"content-items-content"},[t._m(2),e("van-row",{staticClass:"in-post-content",class:[t.isShow?"am-active":""],attrs:{gutter:"16"}},[t._l(t.inpostList,(function(s,n){return e("van-col",{key:s.id,staticClass:"in-post-list",attrs:{span:"12"}},[e("div",{staticClass:"in-post-pie"},[e("div",{staticClass:"in-post-title"},[t._v(t._s(s.title))]),e("div",{staticClass:"in-post-text"}),e("div",{staticClass:"in-post-pie-content",attrs:{id:"inpostList"+s.id}})])])})),e("van-col",{staticClass:"in-post-list",attrs:{span:"12"}})],2),e("div",{staticClass:"text-center"},[e("div",{staticClass:"show-more text-yellow fs-12",on:{click:function(e){return t.showMore("")}}},[e("img",{class:[t.isShow?"am-active":""],attrs:{width:"16px",src:s(2190)}}),t._v(" "+t._s(t.isShow?"Folded":"Show More")+" ")])])],1)])],1)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"content-items-title"},[e("img",{attrs:{width:"24px",src:s(2024)}}),e("span",[t._v("Recruitment Process")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"content-items"},[e("div",{staticClass:"content-items-content"},[e("div",{staticClass:"content-items-title"},[e("img",{attrs:{width:"24px",src:s(711)}}),e("span",[t._v("Conversion by Channel")])]),e("div",{staticClass:"channel-items-content"},[e("div",{staticClass:"channel-items"},[e("div",{staticClass:"channel-bar",attrs:{id:"channel"}})])])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"content-items-title"},[e("img",{attrs:{width:"24px",src:s(7592)}}),e("span",[t._v("Probation Pass Rate")])])}],a=(s(4114),s(7349)),o=s(3011),r=s(2544),c=s(6912),l=s(7967),h=s(5520),u=s(2407),d=s(8193),m={name:"recruitment",components:{Row:a.A,Col:o.A,Actionsheet:r.Actionsheet,Picker:c.A,[l.A.name]:l.A,Sticky:h.A},data(){const t={common:{pageNum:1,pageSize:2e3,returnTotalNum:"true"}};return{...t,selBu:"",selMonth:(0,u.n7)(new Date,"month"),selMonthN:(0,u.n7)(new Date,"normalDay2"),show:!1,actions:[{name:"TKH"},{name:"TKH"},{name:"TKH"},{name:"TKH"},{name:"TKH"},{name:"TKH"},{name:"TKH"}],currentDate:new Date,showMonth:!1,inpostList:[{id:1,title:"TKH",type:"normal"},{id:2,title:"SLT",type:"warning"},{id:3,title:"TLC",type:"danger"},{id:4,title:"TLQ"},{id:5,title:"HTK"},{id:6,title:"TKZY"},{id:7,title:"TKH"}],isShow:!1,recruitStat:[],recruitDTL:[],recruited:0,vacancy:0,remain:0}},computed:{channelItems(){const t={};return this.recruitDTL.forEach((e=>{t[e.secondary_channel]=t[e.secondary_channel]||[],t[e.secondary_channel].push(e)})),t}},created(){this.$nextTick((()=>{this.selBu=this.buList?.[0]?.value,this.setEchars()}))},watch:{},methods:{async getRecruitStat(){const t=await d.LX((0,u.of)({...this.$options.data().common,bu_code:this.selBu,the_month:(0,u.n7)(new Date(this.selMonthN),"monthN")}));this.recruitStat=t.rows,this.recruited=t.rows.map((t=>t.successful_onboarding)).reduce(((t,e)=>t+e),0),this.vacancy=t.rows.map((t=>t.recruited)).reduce(((t,e)=>t+e),0),this.remain=this.vacancy-this.recruited},async getRecruitDTL(){const t=await d.Hz((0,u.of)({...this.$options.data().common,bu_code:this.selBu,the_month:(0,u.n7)(new Date(this.selMonthN),"monthN")}));this.recruitDTL=t.rows},async setEchars(){await this.getRecruitStat(),await this.getRecruitDTL(),console.log(this.channelItems),this.getChannel(!0),this.getRecruitment(!0);for(let t=0;t<this.inpostList.length;t++)this.getInpost(this.inpostList[t],!0);this.observer=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting?this.getChannel(!0):this.getChannel(!1)}))})),this.observer.observe(document.getElementById("channel")),this.observer3=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting?this.getRecruitment(!0):this.getRecruitment(!1)}))})),this.observer3.observe(document.getElementById("recruitment"));for(let t=0;t<this.inpostList.length;t++)this["observer4"+(t+1)]=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?this.getInpost(this.inpostList[t],!0):this.getInpost(this.inpostList[t],!1)}))})),this["observer4"+(t+1)].observe(document.getElementById("inpostList"+this.inpostList[t].id))},formatter(t,e){return"year"===t?`${e}年`:"month"===t?`${e}月`:e},confirm(t){this.showMonth=!1,this.selMonth=(0,u.n7)(new Date(t),"month"),this.selMonthN=(0,u.n7)(new Date(t),"normalDay2"),this.setEchars()},onSelect(t){this.$forceUpdate(),this.show=!1,this.selBu=t.value,this.$nextTick((()=>{this.setEchars()}))},getRecruitment(t){const e=document.getElementById("recruitment");if(!e)return!1;const s=this.$echarts.init(e);let n,i=this.recruited?this.recruited/this.vacancy*100:0;const a=[{value:i.toFixed(2),name:"In-post / Forcast",title:{offsetCenter:["0%","13%"],fontSize:10},detail:{valueAnimation:!0,offsetCenter:["0%","-7%"],fontSize:16}}];n={color:["#5579ED"],series:[{type:"gauge",startAngle:90,endAngle:-270,center:["50%","50%"],pointer:{show:!1},progress:{show:i,overlap:!1,roundCap:!0,clip:!1},axisLine:{lineStyle:{width:10}},splitLine:{show:!1,distance:0,length:10},axisTick:{show:!1},axisLabel:{show:!1,distance:50},data:t?a:[],title:{fontSize:14},detail:{width:50,height:14,fontSize:14,color:"inherit",borderColor:"inherit",formatter:"{value}%"}}]},n&&"object"===typeof n&&s.setOption(n),window.addEventListener("resize",s.resize)},getChannel(t){const e=document.getElementById("channel");if(!e)return!1;const s=this.$echarts.init(e,null,{devicePixelRatio:2});let n;for(let i in this.channelItems)this.channelItems.hasOwnProperty(i);n={color:["#FF860F","#5579ED"],tooltip:{alwaysShowContent:!1,trigger:"axis",axisPointer:{type:"shadow"}},legend:{bottom:"5%",left:"7%",icon:"circle",itemHeight:8,itemWidth:8,itemGap:24,textStyle:{fontSize:"12",color:"#333333"}},grid:{top:"11%",left:"6%",right:"10%",bottom:"18%",containLabel:!0},xAxis:{type:"value",axisLabel:{fontSize:"0",show:!1},max:253,interval:parseInt(253/3)},yAxis:{type:"category",data:["...","社招","LinkIn","猎聘","前程无忧","51Job"],axisTick:{show:!1},axisLabel:{color:"#333333",fontSize:"12"},axisLine:{lineStyle:{color:"#EEEEEE"}}},series:[{name:"入职数",type:"bar",stack:"total",barWidth:"16",itemStyle:{borderRadius:[2,0,0,2]},label:{show:!0,color:"#FFFFFF",fontSize:"11"},data:[23,45,18,43,23,23]},{name:"简历数",type:"bar",stack:"total",barWidth:"16",itemStyle:{borderRadius:[0,2,2,0]},label:{show:!0,color:"#FFFFFF",fontSize:"11"},data:t?[120,132,101,134,90,230]:[]}]},n&&"object"===typeof n&&s.setOption(n),window.addEventListener("resize",s.resize)},showMore(t){this["isShow"+t]=!this["isShow"+t]},getInpost(t,e){const s=document.getElementById("inpostList"+t.id);if(!s)return!1;const n=this.$echarts.init(s);let i,a=["#A3CCF8","#5579ED"];"warning"===t?.type?a=["#FFBD73","#B87B00"]:"danger"===t?.type&&(a=["#FFB3D1","#F25769"]);const o=[{value:82.22,name:"In-post / Forcast",title:{offsetCenter:["0%","27%"],fontSize:8},detail:{valueAnimation:!0,offsetCenter:["0%","12%"],fontSize:14}},{value:88.62,name:"In-post / Budget",title:{offsetCenter:["0%","-10%"],fontSize:8},detail:{valueAnimation:!0,offsetCenter:["0%","-25%"],fontSize:14}}];i={color:a,series:[{type:"gauge",startAngle:90,endAngle:-270,center:["50%","37%"],pointer:{show:!1},progress:{show:!0,overlap:!1,roundCap:!0,clip:!1},axisLine:{lineStyle:{width:14}},splitLine:{show:!1,distance:0,length:10},axisTick:{show:!1},axisLabel:{show:!1,distance:50},data:e?o:[],title:{fontSize:14},detail:{width:50,height:14,fontSize:14,color:"inherit",borderColor:"inherit",formatter:"{value}%"}}]},i&&"object"===typeof i&&n.setOption(i),window.addEventListener("resize",n.resize)}}},p=m,v=s(845),f=(0,v.A)(p,n,i,!1,null,"4c56da80",null),g=f.exports},2407:function(t,e,s){s.d(e,{n7:function(){return i},of:function(){return n},y7:function(){return a},zB:function(){return o}});s(4114);function n(t,e){const s=JSON.parse(JSON.stringify(t)),i=Object.keys(t);return i.forEach((i=>{-1!==[null,void 0,""].indexOf(s[i])?delete s[i]:e&&"object"===typeof t[i]&&!Array.isArray(t[i])&&(s[i]=n(s[i]))})),s}function i(t,e){if(!t)return"";const s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=new Date(t),i=n.getFullYear(),a=String(n.getMonth()+1).padStart(2,0),o=s[n.getMonth()],r=String(n.getDate()).padStart(2,0),c=String(n.getHours()).padStart(2,0),l=String(n.getMinutes()).padStart(2,0),h=String(n.getSeconds()).padStart(2,0);switch(e){case"slash":return`${i}/${a}/${r}`;case"year":return`${i}`;case"monthN":return`${i}-${a}`;case"month":return`${i}-${o}`;case"monthsh":return`${i}/${a}`;case"day":return`${r}-${a}-${i}`;case"timestamp":return`${i}${a}${r}${c}${l}`;case"obj":return{y:i,m:a,d:r,h:c,min:l,s:h};case"normal":return`${i}-${a}-${r} ${c}:${l}:${h}`;case"normalHours":return`${i}-${a}-${r} ${c}`;case"normalMin":return`${i}-${a}-${r} ${c}:${l}`;case"normalDay":return`${i}-${o}-${r}`;case"normalDay2":return`${i}-${a}-${r}`;default:return`${a}-${r}-${i} ${c}:${l}`}}const a=t=>{const e=new Date(t),s=e.getFullYear(),n=e.getMonth(),i=t=>t%4===0&&t%100!==0||t%400===0,a=[31,i(s)?29:28,31,30,31,30,31,31,30,31,30,31][n];return a},o=()=>{let t=["#73A0FA","#73DEB3","#7585A2","#F7C739","#EB7E65","#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc","#379392","#4F86C6","#4F86C6","#6C49B8","#67D5B5","#EE7785","#C89EC4","#84B1ED"];return t}},2190:function(t,e,s){t.exports=s.p+"img/more.0e51bcf8.svg"},597:function(t,e,s){t.exports=s.p+"img/select.566d2950.svg"},2024:function(t,e,s){t.exports=s.p+"img/icon_1.7283ab4a.svg"},711:function(t,e,s){t.exports=s.p+"img/icon_1.b109c59a.svg"},7592:function(t,e,s){t.exports=s.p+"img/icon_4.e012cc7b.svg"}}]);
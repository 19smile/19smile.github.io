"use strict";(self["webpackChunktenant_portal"]=self["webpackChunktenant_portal"]||[]).push([[409],{7409:function(t,e,n){n.r(e),n.d(e,{default:function(){return g}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"content-items"},[e("div",{staticClass:"content-items-content"},[t._m(0),e("div",{staticClass:"contract-renewing-content"},[e("van-row",{staticClass:"contract-renewing-content-split text-center",attrs:{gutter:"16"}},[e("van-col",{attrs:{span:"12"}},[e("div",[e("p",{staticClass:"fs-14 text-gray lh-24"},[t._v("Resignation of B/C")]),e("p",{staticClass:"fs-24 text-yellow lh-40 fw-600"},[t._v(t._s(t.mResignation.length))])])]),e("van-col",{attrs:{span:"12"}},[e("div",[e("p",{staticClass:"fs-14 text-gray lh-24"},[t._v("Total Resign")]),e("p",{staticClass:"fs-24 text-blue lh-40 fw-600"},[t._v(t._s(t.resignationItems.length))])])])],1)],1),e("div",{staticClass:"percentage-box pb-8 pt-0"},[e("div",{staticClass:"percentage-box-content percentage-box-content-mini align-center text-white fs-14"},[e("div",{staticClass:"percentage-box-items bg-yellow text-center",style:{width:t.mResignationPercentage+"%"}},[e("span",{staticClass:"fw-600"},[t._v(t._s(t.mResignationPercentage)+"%")])]),e("div",{staticClass:"percentage-box-items text-right bg-gray",style:{width:100-t.mResignationPercentage+"%"}},[e("span",{staticClass:"text-gray"},[t._v("Total Resign")])])]),e("van-row",{staticClass:"fs-14 lh-32"},[e("van-col",{staticClass:"text-yellow",attrs:{span:"12"}},[t._v("Management")])],1)],1)])]),e("div",{staticClass:"content-items"},[e("div",{staticClass:"content-items-content"},[t._m(1),e("div",{staticClass:"resign-reason-content"},[e("div",{ref:"resignReason"},t._l(t.resignReasonList,(function(n,s){return e("div",{key:s,style:n.style},[e("span",[t._v(t._s(n.text))])])})),0)])])])])},r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"content-items-title"},[e("img",{attrs:{width:"24px",src:n(586)}}),e("span",[t._v("Resignation of Management")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"content-items-title"},[e("img",{attrs:{width:"24px",src:n(2948)}}),e("span",[t._v("Resign Reason")])])}],a=(n(4114),n(2407)),i={name:"turnover",data(){return{colors:(0,a.zB)(),resignReasonList:[]}},computed:{resignationItems(){return this.hrEmployee.filter((t=>{const e=(0,a.n7)(t.resign_date,"monthN"),n=(0,a.n7)(new Date((new Date).setMonth((new Date).getMonth())),"monthN");if(e<n&&t.resign_date)return t}))},mResignation(){return this.resignationItems.filter((t=>"B"===t.emp_level||"C"===t.emp_level))},mResignationPercentage(){return(this.mResignation.length/this.resignationItems.length*100).toFixed(2)},resignReason(){const t=this.hrEmployee.filter((t=>"离职"===t.status&&t.resign_reason)),e=t.map((t=>t.resign_reason)),n=e.filter(((t,e,n)=>n.indexOf(t)===e));return n}},created(){console.log(this.resignReason),this.$nextTick((()=>{this.generateRandomItems()}))},watch:{},methods:{generateRandomItems(){const t=[],e=this.$refs.resignReason.offsetWidth,n=this.$refs.resignReason.offsetHeight,s=this.resignReason.length>50?50:this.resignReason.length;for(let r=0;r<s;r++){let s,a;do{s={fontSize:`${this.getRandomInt(12,20)}px`,color:this.colors[r],position:"absolute",left:`${this.getRandomInt(0,e-100)}px`,top:`${this.getRandomInt(0,n-50)}px`},a=t.some((t=>this.isOverlap(s,t.style)))}while(a);t.push({text:this.resignReason[r],style:s})}this.resignReasonList=t},getRandomInt(t,e){return Math.floor(Math.random()*(e-t))+t},isOverlap(t,e){const n={left:parseInt(t.left),top:parseInt(t.top),right:parseInt(t.left)+5*parseInt(t.fontSize),bottom:parseInt(t.top)+parseInt(t.fontSize)},s={left:parseInt(e.left),top:parseInt(e.top),right:parseInt(e.left)+5*parseInt(e.fontSize),bottom:parseInt(e.top)+parseInt(e.fontSize)};return!(n.right<s.left||n.left>s.right||n.bottom<s.top||n.top>s.bottom)}}},o=i,c=n(845),l=(0,c.A)(o,s,r,!1,null,"906ecb68",null),g=l.exports},2407:function(t,e,n){n.d(e,{a5:function(){return o},n7:function(){return r},of:function(){return s},y7:function(){return a},zB:function(){return i}});n(4114);function s(t,e){const n=JSON.parse(JSON.stringify(t)),r=Object.keys(t);return r.forEach((r=>{-1!==[null,void 0,""].indexOf(n[r])?delete n[r]:e&&"object"===typeof t[r]&&!Array.isArray(t[r])&&(n[r]=s(n[r]))})),n}function r(t,e){if(!t)return"";const n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=["January","February","March","April","May","June","July","August","September","October","November","December"],r=new Date(t),a=r.getFullYear(),i=String(r.getMonth()+1).padStart(2,0),o=n[r.getMonth()],c=s[r.getMonth()],l=String(r.getDate()).padStart(2,0),g=String(r.getHours()).padStart(2,0),u=String(r.getMinutes()).padStart(2,0),p=String(r.getSeconds()).padStart(2,0);switch(e){case"slash":return`${a}/${i}/${l}`;case"year":return`${a}`;case"monthN":return`${a}-${i}`;case"monthLong":return`${a}-${c}`;case"month":return`${a}-${o}`;case"monthsh":return`${a}/${i}`;case"day":return`${l}-${i}-${a}`;case"timestamp":return`${a}${i}${l}${g}${u}`;case"obj":return{y:a,m:i,d:l,h:g,min:u,s:p};case"normal":return`${a}-${i}-${l} ${g}:${u}:${p}`;case"normalHours":return`${a}-${i}-${l} ${g}`;case"normalMin":return`${a}-${i}-${l} ${g}:${u}`;case"normalDay":return`${a}-${o}-${l}`;case"normalDay2":return`${a}-${i}-${l}`;default:return`${i}-${l}-${a} ${g}:${u}`}}const a=t=>{const e=new Date(t),n=e.getFullYear(),s=e.getMonth(),r=t=>t%4===0&&t%100!==0||t%400===0,a=[31,r(n)?29:28,31,30,31,30,31,31,30,31,30,31][s];return a},i=()=>{let t=["#73A0FA","#73DEB3","#7585A2","#F7C739","#EB7E65","#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc","#379392","#4F86C6","#4F86C6","#6C49B8","#67D5B5","#EE7785","#C89EC4","#84B1ED"];return t},o=t=>{const e=new Date,n=e.getFullYear(),s=e.getMonth(),r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],a=["January","February","March","April","May","June","July","August","September","October","November","December"];let i=[];for(let o=5;o>=0;o--){const e=s-o<0?n-1:n,c=(s-o+12)%12,l=t?a[c]:r[c],g=`${e}-${l}`;i.push(g)}return i}},586:function(t,e,n){t.exports=n.p+"img/icon_10.58d1e580.svg"},2948:function(t,e,n){t.exports=n.p+"img/icon_9.744f614f.svg"}}]);
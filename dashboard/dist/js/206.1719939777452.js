"use strict";(self["webpackChunktenant_portal"]=self["webpackChunktenant_portal"]||[]).push([[206],{3206:function(t,e,n){n.r(e),n.d(e,{default:function(){return g}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("div",{staticClass:"content-items"},[e("div",{staticClass:"content-items-content"},[t._m(0),e("div",{staticClass:"contract-renewing-content"},[e("van-row",{staticClass:"contract-renewing-content-split text-center",attrs:{gutter:"16"}},[e("van-col",{attrs:{span:"12"}},[e("div",[e("p",{staticClass:"fs-14 text-gray lh-24"},[t._v("Resignation of B/C")]),e("p",{staticClass:"fs-24 text-yellow lh-40 fw-600"},[t._v(t._s(t.mResignation.length))])])]),e("van-col",{attrs:{span:"12"}},[e("div",[e("p",{staticClass:"fs-14 text-gray lh-24"},[t._v("Total Resign")]),e("p",{staticClass:"fs-24 text-blue lh-40 fw-600"},[t._v(t._s(t.resignation.length))])])])],1)],1),e("div",{staticClass:"percentage-box pb-8 pt-0"},[e("div",{staticClass:"percentage-box-content percentage-box-content-mini align-center text-white fs-14"},[e("div",{staticClass:"percentage-box-items bg-yellow text-center",style:{width:t.mResignationPercentage+"%"}},[e("span",{staticClass:"fw-600"},[t._v(t._s(t.mResignationPercentage)+"%")])]),e("div",{staticClass:"percentage-box-items text-right bg-gray",style:{width:100-t.mResignationPercentage+"%"}},[e("span",{staticClass:"text-gray"},[t._v("Total Resign")])])]),e("van-row",{staticClass:"fs-14 lh-32"},[e("van-col",{staticClass:"text-yellow",attrs:{span:"12"}},[t._v("Management")])],1)],1)])]),e("div",{staticClass:"content-items"},[e("div",{staticClass:"content-items-content"},[t._m(1),e("div",{staticClass:"resign-reason-content"},[e("div",{ref:"resignReason"},t._l(t.resignReasonList,(function(n,s){return e("div",{key:s,style:n.style},[e("span",[t._v(t._s(n.text))])])})),0)])])])])},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"content-items-title"},[e("img",{attrs:{width:"24px",src:n(586)}}),e("span",[t._v("Resignation of Management")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"content-items-title"},[e("img",{attrs:{width:"24px",src:n(2948)}}),e("span",[t._v("Resign Reason")])])}],r=(n(4114),n(2407)),i={name:"turnover",data(){return{colors:(0,r.zB)(),resignReasonList:[]}},computed:{employee(){return this.hrEmployee.filter((t=>{const e=new Date((0,r.n7)(new Date(t.resign_date),"monthN")).getTime(),n=new Date((0,r.n7)(new Date(t.hire_date),"monthN")).getTime(),s=new Date((0,r.n7)(new Date((new Date).setMonth((new Date).getMonth()-1)),"monthN"));if(e>new Date(s).getTime()&&n<=new Date(s).getTime()||!t.resign_date&&n<=new Date(s).getTime())return t}))},resignation(){return this.hrEmployee.filter((t=>{const e=new Date((0,r.n7)(new Date(t.resign_date),"monthN")).getTime(),n=(new Date((0,r.n7)(new Date(t.hire_date),"monthN")).getTime(),new Date((0,r.n7)(new Date((new Date).setMonth((new Date).getMonth()-1)),"monthN")));if(t.resign_date&&e<=new Date(n).getTime())return t}))},resignationItems(){return this.hrEmployee.filter((t=>{const e=(0,r.n7)(new Date((new Date).setMonth((new Date).getMonth()-1)),"monthN"),n=new Date((0,r.n7)(new Date(t.resign_date),"monthN")).getTime();if(n<=new Date(e).getTime())return t}))},mResignation(){return this.resignation.filter((t=>"B"===t.emp_level||"C"===t.emp_level))},mResignationPercentage(){return(this.mResignation.length/this.resignation.length*100).toFixed(2)},resignReason(){const t=this.hrEmployee.filter((t=>"离职"===t.status&&t.resign_reason)),e=t.map((t=>t.resign_reason)),n=e.filter(((t,e,n)=>n.indexOf(t)===e));return n}},created(){this.$nextTick((()=>{this.generateRandomItems()}))},watch:{},methods:{generateRandomItems(){const t=[],e=this.$refs.resignReason.offsetWidth,n=this.$refs.resignReason.offsetHeight,s=this.resignReason.length>50?50:this.resignReason.length;for(let a=0;a<s;a++){let s,r;do{s={fontSize:`${this.getRandomInt(12,20)}px`,color:this.colors[a],position:"absolute",left:`${this.getRandomInt(0,e-100)}px`,top:`${this.getRandomInt(0,n-50)}px`},r=t.some((t=>this.isOverlap(s,t.style)))}while(r);t.push({text:this.resignReason[a],style:s})}this.resignReasonList=t},getRandomInt(t,e){return Math.floor(Math.random()*(e-t))+t},isOverlap(t,e){const n={left:parseInt(t.left),top:parseInt(t.top),right:parseInt(t.left)+5*parseInt(t.fontSize),bottom:parseInt(t.top)+parseInt(t.fontSize)},s={left:parseInt(e.left),top:parseInt(e.top),right:parseInt(e.left)+5*parseInt(e.fontSize),bottom:parseInt(e.top)+parseInt(e.fontSize)};return!(n.right<s.left||n.left>s.right||n.bottom<s.top||n.top>s.bottom)}}},o=i,c=n(845),l=(0,c.A)(o,s,a,!1,null,"b67f2636",null),g=l.exports},2407:function(t,e,n){n.d(e,{a5:function(){return o},n7:function(){return a},of:function(){return s},y7:function(){return r},zB:function(){return i}});n(4114);function s(t,e){const n=JSON.parse(JSON.stringify(t)),a=Object.keys(t);return a.forEach((a=>{-1!==[null,void 0,""].indexOf(n[a])?delete n[a]:e&&"object"===typeof t[a]&&!Array.isArray(t[a])&&(n[a]=s(n[a]))})),n}function a(t,e){if(!t)return"";const n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=["January","February","March","April","May","June","July","August","September","October","November","December"],a=new Date(t),r=a.getFullYear(),i=String(a.getMonth()+1).padStart(2,0),o=n[a.getMonth()],c=s[a.getMonth()],l=String(a.getDate()).padStart(2,0),g=String(a.getHours()).padStart(2,0),u=String(a.getMinutes()).padStart(2,0),h=String(a.getSeconds()).padStart(2,0);switch(e){case"slash":return`${r}/${i}/${l}`;case"year":return`${r}`;case"monthN":return`${r}-${i}`;case"monthLong":return`${r}-${c}`;case"month":return`${r}-${o}`;case"monthsh":return`${r}/${i}`;case"day":return`${l}-${i}-${r}`;case"timestamp":return`${r}${i}${l}${g}${u}`;case"obj":return{y:r,m:i,d:l,h:g,min:u,s:h};case"normal":return`${r}-${i}-${l} ${g}:${u}:${h}`;case"normalHours":return`${r}-${i}-${l} ${g}`;case"normalMin":return`${r}-${i}-${l} ${g}:${u}`;case"normalDay":return`${r}-${o}-${l}`;case"normalDay2":return`${r}-${i}-${l}`;default:return`${i}-${l}-${r} ${g}:${u}`}}const r=t=>{const e=new Date(t),n=e.getFullYear(),s=e.getMonth(),a=t=>t%4===0&&t%100!==0||t%400===0,r=[31,a(n)?29:28,31,30,31,30,31,31,30,31,30,31][s];return r},i=()=>{let t=["#73A0FA","#73DEB3","#7585A2","#F7C739","#EB7E65","#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc","#379392","#4F86C6","#4F86C6","#6C49B8","#67D5B5","#EE7785","#C89EC4","#84B1ED"];return t},o=t=>{const e=new Date,n=e.getFullYear(),s=e.getMonth()-1,a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=["January","February","March","April","May","June","July","August","September","October","November","December"];let i=[];for(let o=5;o>=0;o--){const e=s-o<0?n-1:n,c=(s-o+12)%12,l=t?r[c]:a[c],g=`${e}-${l}`;i.push(g)}return i}},586:function(t,e,n){t.exports=n.p+"img/icon_10.58d1e580.svg"},2948:function(t,e,n){t.exports=n.p+"img/icon_9.744f614f.svg"}}]);
"use strict";(self["webpackChunkHR_Dashboard"]=self["webpackChunkHR_Dashboard"]||[]).push([[928],{928:function(t,e,n){n.r(e),n.d(e,{default:function(){return u}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("van-sticky",{attrs:{"offset-top":48}},[e("van-row",{staticClass:"select-box select-box",attrs:{gutter:"6"}},[e("van-col",{attrs:{span:"12"}},[e("span",{staticClass:"fs-20",on:{click:function(e){t.show=!0}}},[t._v(t._s(t.selBu))]),e("img",{attrs:{width:"24px",src:n(597)},on:{click:function(e){t.show=!0}}})]),e("van-col",{attrs:{span:"12 justify-end"}},[e("div",{staticClass:"fs-20"},[t._v("YTD")])])],1)],1),e("van-action-sheet",{attrs:{title:"Select",round:!1,actions:t.buLists},on:{select:t.onSelect},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}}),e("div",{staticClass:"content-items"},[e("div",{staticClass:"content-items-content"},[t._m(0),e("div",{staticClass:"contract-renewing-content"},[e("van-row",{staticClass:"contract-renewing-content-split text-center",attrs:{gutter:"16"}},[e("van-col",{attrs:{span:"12"}},[e("div",[e("p",{staticClass:"fs-14 text-gray lh-24"},[t._v("Resignation of B/C")]),e("p",{staticClass:"fs-24 text-yellow lh-40 fw-600"},[t._v(t._s(t.mResignation.length))])])]),e("van-col",{attrs:{span:"12"}},[e("div",[e("p",{staticClass:"fs-14 text-gray lh-24"},[t._v("Total Resign")]),e("p",{staticClass:"fs-24 text-blue lh-40 fw-600"},[t._v(t._s(t.buResignationItems.length))])])])],1)],1),e("div",{staticClass:"percentage-box pb-8 pt-0"},[e("div",{staticClass:"percentage-box-content percentage-box-content-mini align-center text-white fs-14"},[e("div",{staticClass:"percentage-box-items bg-yellow text-center",style:{width:t.mResignationPercentage+"%"}},[e("span",{staticClass:"fw-600"},[t._v(t._s(t.mResignationPercentage)+"%")])]),e("div",{staticClass:"percentage-box-items text-right bg-gray",style:{width:100-t.mResignationPercentage+"%"}},[e("span",{staticClass:"text-gray"},[t._v("Total Resign")])])]),e("van-row",{staticClass:"fs-14 lh-32"},[e("van-col",{staticClass:"text-yellow",attrs:{span:"12"}},[t._v("Management")])],1)],1)])]),e("div",{staticClass:"content-items"},[e("div",{staticClass:"content-items-content"},[t._m(1),e("div",{staticClass:"resign-reason-content"},[e("div",{ref:"resignReason"},t._l(t.resignReasonList,(function(n,s){return e("div",{key:s,style:n.style},[e("span",[t._v(t._s(n.text))])])})),0)])])])],1)},a=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"content-items-title"},[e("img",{attrs:{width:"24px",src:n(586)}}),e("span",[t._v("Resignation of Management")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"content-items-title"},[e("img",{attrs:{width:"24px",src:n(2948)}}),e("span",[t._v("Resign Reason")])])}],i=(n(4114),n(2407)),r={name:"turnover",data(){return{colors:(0,i.zB)(),resignReasonList:[],buLists:[],show:!1,selBu:"Overview",buResignationItems:[]}},computed:{resignation(){return this.hrEmployee.filter((t=>{const e=new Date((0,i.n7)(new Date(t.resign_date),"monthN")).getTime(),n=(new Date((0,i.n7)(new Date(t.hire_date),"monthN")).getTime(),new Date((0,i.n7)(new Date((new Date).setMonth((new Date).getMonth())),"monthN"))),s=new Date((0,i.n7)(new Date((new Date).setMonth(0)),"monthN"));if(t.resign_date&&e<=new Date(n).getTime()&&e>=new Date(s).getTime())return t}))},resignationItems(){const t={};return this.resignation.forEach((e=>{t[e.bu_code]=t[e.bu_code]||[],t[e.bu_code].push(e)})),t},mResignation(){return this.buResignationItems.filter((t=>"B"===t.emp_level||"C"===t.emp_level))},mResignationPercentage(){return(this.mResignation.length/this.buResignationItems.length*100).toFixed(2)},resignReason(){const t=this.buResignationItems.filter((t=>"离职"===t.status&&t.resign_reason)),e=t.map((t=>t.resign_reason)),n=e.filter(((t,e,n)=>n.indexOf(t)===e));return n}},created(){this.buLists=[{name:"Overview",value:"Overview"}].concat(this.buList),this.buResignationItems=this.resignation,this.$nextTick((()=>{this.generateRandomItems()}))},watch:{},methods:{onSelect(t){"Overview"===t.value?this.buResignationItems=this.resignation||[]:this.buResignationItems=this.resignationItems[t.value]||[],this.$forceUpdate(),this.show=!1,this.selBu=t.value,this.$nextTick((()=>{this.generateRandomItems()}))},generateRandomItems(){const t=[],e=this.$refs.resignReason.offsetWidth,n=this.$refs.resignReason.offsetHeight,s=this.resignReason.length>50?50:this.resignReason.length;for(let a=0;a<s;a++){let s,i;do{s={fontSize:`${this.getRandomInt(12,20)}px`,color:this.colors[a],position:"absolute",left:`${this.getRandomInt(0,e-100)}px`,top:`${this.getRandomInt(0,n-50)}px`},i=t.some((t=>this.isOverlap(s,t.style)))}while(i);t.push({text:this.resignReason[a],style:s})}this.resignReasonList=t},getRandomInt(t,e){return Math.floor(Math.random()*(e-t))+t},isOverlap(t,e){const n={left:parseInt(t.left),top:parseInt(t.top),right:parseInt(t.left)+5*parseInt(t.fontSize),bottom:parseInt(t.top)+parseInt(t.fontSize)},s={left:parseInt(e.left),top:parseInt(e.top),right:parseInt(e.left)+5*parseInt(e.fontSize),bottom:parseInt(e.top)+parseInt(e.fontSize)};return!(n.right<s.left||n.left>s.right||n.bottom<s.top||n.top>s.bottom)}}},o=r,c=n(845),l=(0,c.A)(o,s,a,!1,null,"f844c858",null),u=l.exports},2407:function(t,e,n){n.d(e,{a5:function(){return o},n7:function(){return a},of:function(){return s},y7:function(){return i},zB:function(){return r}});n(4114);function s(t,e){const n=JSON.parse(JSON.stringify(t)),a=Object.keys(t);return a.forEach((a=>{-1!==[null,void 0,""].indexOf(n[a])?delete n[a]:e&&"object"===typeof t[a]&&!Array.isArray(t[a])&&(n[a]=s(n[a]))})),n}function a(t,e){if(!t)return"";const n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=["January","February","March","April","May","June","July","August","September","October","November","December"],a=new Date(t),i=a.getFullYear(),r=String(a.getMonth()+1).padStart(2,0),o=n[a.getMonth()],c=s[a.getMonth()],l=String(a.getDate()).padStart(2,0),u=String(a.getHours()).padStart(2,0),g=String(a.getMinutes()).padStart(2,0),h=String(a.getSeconds()).padStart(2,0);switch(e){case"slash":return`${i}/${r}/${l}`;case"year":return`${i}`;case"monthN":return`${i}-${r}`;case"monthLong":return`${i}-${c}`;case"month":return`${i}-${o}`;case"monthsh":return`${i}/${r}`;case"day":return`${l}-${r}-${i}`;case"timestamp":return`${i}${r}${l}${u}${g}`;case"obj":return{y:i,m:r,d:l,h:u,min:g,s:h};case"normal":return`${i}-${r}-${l} ${u}:${g}:${h}`;case"normalHours":return`${i}-${r}-${l} ${u}`;case"normalMin":return`${i}-${r}-${l} ${u}:${g}`;case"normalDay":return`${i}-${o}-${l}`;case"normalDay2":return`${i}-${r}-${l}`;case"normalDay3":return`${i}-${c}-${l}`;case"normalDay4":return`${i}/${c}/${l}`;default:return`${r}-${l}-${i} ${u}:${g}`}}const i=t=>{const e=new Date(t),n=e.getFullYear(),s=e.getMonth(),a=t=>t%4===0&&t%100!==0||t%400===0,i=[31,a(n)?29:28,31,30,31,30,31,31,30,31,30,31][s];return i},r=()=>{let t=["#73A0FA","#73DEB3","#7585A2","#F7C739","#EB7E65","#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc","#379392","#4F86C6","#4F86C6","#6C49B8","#67D5B5","#EE7785","#C89EC4","#84B1ED"];return t},o=(t,e,n)=>{const s=n?new Date(n):new Date,a=s.getFullYear(),i=s.getMonth()-(e||0),r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=["January","February","March","April","May","June","July","August","September","October","November","December"];let c=[];for(let l=5;l>=0;l--){const e=i-l<0?a-1:a,n=(i-l+12)%12,s=t?o[n]:r[n],u=`${e}-${s}`;c.push(u)}return c}},597:function(t,e,n){t.exports=n.p+"img/select.566d2950.svg"},586:function(t,e,n){t.exports=n.p+"img/icon_10.58d1e580.svg"},2948:function(t,e,n){t.exports=n.p+"img/icon_9.744f614f.svg"}}]);
"use strict";(self["webpackChunkHR_Dashboard"]=self["webpackChunkHR_Dashboard"]||[]).push([[495],{8495:function(e,t,s){s.r(t),s.d(t,{default:function(){return v}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"content"},[t("van-sticky",{attrs:{"offset-top":48}},[t("van-row",{staticClass:"select-box",attrs:{gutter:"6"}},[t("van-col",{attrs:{span:"12"}},[t("span",{on:{click:function(t){e.show=!0}}},[e._v("Select BU |")]),t("span",{staticClass:"ml-8",on:{click:function(t){e.show=!0}}},[e._v(e._s(e.selBu))]),t("img",{attrs:{width:"24px",src:s(597)},on:{click:function(t){e.show=!0}}})])],1)],1),t("van-action-sheet",{attrs:{round:!1,title:"Select BU",actions:e.buList},on:{select:e.onSelect},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}}),t("div",{staticClass:"content-items"},[t("div",{staticClass:"content-items-content"},[t("div",{staticClass:"content-items-title content-items-title-2"},[e._m(0),t("div",{staticClass:"content-items-title-right"},[e._v(e._s(e.buEmployeeItems.length))])]),t("div",{staticClass:"employee"},[t("div",{staticClass:"employee-items",style:{height:e.deptHeight}},[t("van-row",[t("van-col",{staticClass:"employee-items-date",attrs:{span:"12"}},[e._v(" Employee By Dept. ")])],1),t("div",{staticClass:"employee-bar",style:{height:e.deptBarHeight},attrs:{id:"employeeList2"}})],1)])]),t("div",{staticClass:"content-items-content mt-12"},[t("div",{staticClass:"percentage-box pb-8"},[e._m(1),t("div",{staticClass:"percentage-box-content percentage-box-content-mini align-center text-white fs-14 percentage-mini"},[t("div",{staticClass:"percentage-box-items bg-yellow",style:{width:"26%"}},[t("span",[t("span",{staticClass:"fw-600"},[e._v(e._s(e.managementTotal))]),t("span",[e._v(" ("+e._s(e.getPercentage(e.buEmployeeItems.length,e.managementTotal))+"%)")])])]),t("div",{staticClass:"percentage-box-items text-right bg-blue4",style:{width:"74%"}},[t("span",[t("span",{staticClass:"fw-600"},[e._v(e._s(e.deptLevel))]),t("span",[e._v(" ("+e._s(e.getPercentage(e.buEmployeeItems.length,e.deptLevel))+"%)")])])])]),t("van-row",{staticClass:"fs-14 lh-32"},[t("van-col",{staticClass:"text-yellow",attrs:{span:"12"}},[e._v("Management")]),t("van-col",{staticClass:"text-blue text-right",attrs:{span:"12"}},[e._v("Non-Management")])],1)],1)])]),e._m(2),t("div",{staticClass:"content-items"},[t("div",{staticClass:"content-items-content"},[e._m(3),t("div",{staticClass:"gender-pie"},[t("div",{staticClass:"pie-center justify-center align-center"},[t("div",[t("p",[e._v("Avg.")]),t("p",[e._v(e._s(e.average))])])]),t("div",{staticClass:"pie-content",attrs:{id:"ageLevel"}})])])]),t("div",{staticClass:"content-items"},[e._m(4),t("div",{staticClass:"leave-items-content"},[t("div",{staticClass:"leave-items"},[t("van-row",[t("van-col",{staticClass:"leave-items-date",attrs:{span:"24"}},[e._v(" Seniority In Swire Group ")])],1),t("div",{staticClass:"leave-bar",attrs:{id:"seniority"}})],1)])])],1)},n=[function(){var e=this,t=e._self._c;return t("div",[t("img",{attrs:{width:"24px",src:s(2687)}}),t("span",[e._v("Employee")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"percentage-box-title fs-14 text-yellow"},[t("span",[e._v("Management Ratio")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"content-items"},[t("div",{staticClass:"content-items-content"},[t("div",{staticClass:"content-items-title"},[t("img",{attrs:{width:"24px",src:s(6227)}}),t("span",[e._v("Education Level")])]),t("div",{staticClass:"gender-pie"},[t("div",{staticClass:"pie-content pie-content2",attrs:{id:"educationLevel"}})])])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"content-items-title"},[t("img",{attrs:{width:"24px",src:s(2498)}}),t("span",[e._v("Age Level")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"content-items-content"},[t("div",{staticClass:"content-items-title"},[t("img",{attrs:{width:"24px",src:s(197)}}),t("span",[e._v("Seniority")])])])}],a=(s(4114),s(7349)),o=s(3011),r=s(2544),l=s(6912),c=s(7967),m=s(5520),h=s(2407),u={name:"detailByBu",components:{Row:a.A,Col:o.A,Actionsheet:r.Actionsheet,Picker:l.A,[c.A.name]:c.A,Sticky:m.A},data(){return{show:!1,buEmployeeItems:[],selBu:""}},computed:{employee(){return this.hrEmployee.filter((e=>{const t=new Date((0,h.n7)(new Date(e.resign_date),"monthN")).getTime(),s=new Date((0,h.n7)(new Date(e.hire_date),"monthN")).getTime(),i=(0,h.n7)(new Date((new Date).setMonth((new Date).getMonth())),"monthN");if(t>new Date(i).getTime()&&s<=new Date(i).getTime()||!e.resign_date&&s<=new Date(i).getTime())return e}))},employeeItems(){const e={};return this.employee.forEach((t=>{e[t.bu_code]=e[t.bu_code]||[],e[t.bu_code].push(t)})),e},deptItems(){const e={};return this.buEmployeeItems.forEach((t=>{e[t.dept_name]=e[t.dept_name]||[],e[t.dept_name].push(t)})),e},deptLen(){return this.deptTotal=this.deptItems,Object.keys(this.deptItems).length},managementTotal(){return this.buEmployeeItems.filter((e=>"B"===e.emp_level||"C"===e.emp_level)).length},deptLevel(){return this.buEmployeeItems.length-this.managementTotal},deptHeight(){return 35*this.deptLen+48+"px"},deptBarHeight(){return 35*this.deptLen+"px"},educationItems(){const e={};return this.buEmployeeItems.forEach((t=>{e[t.education]=e[t.education]||[],e[t.education].push(t)})),e},ageLevelItems(){const e={};return this.buEmployeeItems.forEach((t=>{e[t.age_group]=e[t.age_group]||[],e[t.age_group].push(t)})),e},seniorityList(){const e={};new Date;e["1-3"]=[],e["3-6"]=[],e["6-10"]=[],e["10-15"]=[],e["15-20"]=[],e["20+"]=[];for(let t in this.buEmployeeItems){const s=this.buEmployeeItems[t].hire_year_num;s<=3?e["1-3"].push(this.buEmployeeItems[t]):s<=6?e["3-6"].push(this.buEmployeeItems[t]):s<=10?e["6-10"].push(this.buEmployeeItems[t]):s<=15?e["10-15"].push(this.buEmployeeItems[t]):s<=20?e["15-20"].push(this.buEmployeeItems[t]):s>20&&e["20+"].push(this.buEmployeeItems[t])}return e},average(){const e=this.buEmployeeItems.map((e=>e.age)),t=e.reduce(((e,t)=>e+t),0)/this.buEmployeeItems.length;return Math.round(t)}},mounted(){this.buEmployeeItems=this.employeeItems[this.buList?.[0]?.value]||[],this.selBu=this.buList?.[0]?.value,this.$nextTick((()=>{this.setEchars()}))},watch:{},methods:{parseReqTime:h.n7,daysFromSpecificDate(e,t){const s=new Date(e).getTime(),i=new Date(t).getTime(),n=i-s;return n/864e5},setEchars(e){this.getEmployee(!0,e),this.getAgeLevel(!0),this.getEducationLevel(!0),this.getSeniority(!0),this.observer=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?this.getEmployee(!0,!0):this.getEmployee(!1)}))})),this.observer.observe(document.getElementById("employeeList2")),this.observer2=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?this.getAgeLevel(!0):this.getAgeLevel(!1)}))})),this.observer2.observe(document.getElementById("ageLevel")),this.observer3=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?this.getEducationLevel(!0):this.getEducationLevel(!1)}))})),this.observer3.observe(document.getElementById("educationLevel")),this.observer4=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?this.getSeniority(!0):this.getSeniority(!1)}))})),this.observer4.observe(document.getElementById("seniority"))},getPercentage(e,t){return Math.round(t/e*100)},onSelect(e){this.buEmployeeItems=this.employeeItems[e.value]||[],this.show=!1,this.deptHeight=35*this.deptLen+48+"px",this.deptBarHeight=35*this.deptLen+"px",this.selBu=e.value,this.$forceUpdate(),this.setEchars(!0)},getEmployee(e,t){let s=[];for(let o in this.deptItems)this.deptItems.hasOwnProperty(o)&&s.push({name:o,data:{value:this.deptItems[o].length}});s=[...s].sort(((e,t)=>e.data.value-t.data.value)),s.map(((e,t)=>{e.data.itemStyle=(t+1)%2===0?{color:"#A3CCF8"}:{color:"#5579ED"}}));const i=document.getElementById("employeeList2");if(!i)return!1;const n=this.$echarts.init(i,null,{devicePixelRatio:2});let a;if(a={color:["#5579ED"],tooltip:{alwaysShowContent:!1,trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{top:0,left:"5.5%",right:"13%",bottom:"3%",containLabel:!0},xAxis:{type:"value",axisLabel:{show:!1,fontSize:"0",color:"transparent"},splitLine:{show:!0,lineStyle:{color:"#EEEEEE"}}},yAxis:{type:"category",data:s.map((e=>e.name)),axisTick:{show:!1},axisLabel:{color:"#333333",fontSize:"12"},axisLine:{lineStyle:{color:"#EEEEEE"}}},series:[{name:"",type:"bar",data:e?s.map((e=>e.data)):[],barWidth:"16",itemStyle:{borderRadius:[2,2,2,2]},label:{show:!0,formatter:"{c}",position:"outside",color:"#7CA0CE",fontSize:"12"}}]},a&&"object"===typeof a&&n.setOption(a),window.addEventListener("resize",n.resize),!t)return!1;setTimeout((function(){n.resize()}),500)},getAgeLevel(e){const t=document.getElementById("ageLevel");if(!t)return!1;const s=this.$echarts.init(t,null,{devicePixelRatio:2});let i,n=[];for(let a in this.ageLevelItems)this.ageLevelItems.hasOwnProperty(a)&&n.push({name:a,value:(this.ageLevelItems[a].length/this.buEmployeeItems.length*100).toFixed(2)});i={color:(0,h.zB)(),series:[{type:"pie",center:["51%","50%"],radius:[52,82],itemStyle:{borderColor:"#fff",borderWidth:1},label:{formatter:"{name|{b}}\n{time|{c}%}",lineHeight:12,rich:{name:{fontSize:10,color:"#999"},time:{fontSize:13,fontWeight:600,lineHeight:22,color:"#6B6B6B"}}},labelLine:{normal:{lineStyle:{color:"#E6E6E6"},show:!0,length:8,length2:10}},data:e?n:[]}]},i&&"object"===typeof i&&s.setOption(i),window.addEventListener("resize",s.resize)},getEducationLevel(e){const t=document.getElementById("educationLevel");if(!t)return!1;const s=this.$echarts.init(t,null,{devicePixelRatio:2});let i,n=[];for(let a in this.educationItems)this.educationItems.hasOwnProperty(a)&&n.push({name:a,value:this.educationItems[a].length});i={color:(0,h.zB)(),tooltip:{alwaysShowContent:!1,trigger:"item"},legend:{left:"5%",top:"9.5%",height:"80%",icon:"circle",itemHeight:8,itemWidth:8,itemGap:12,textStyle:{fontSize:"12",color:"#333333"},orient:"vertical"},series:[{type:"pie",center:["68%","50%"],radius:[60,90],itemStyle:{borderColor:"#fff",borderWidth:1},label:{formatter:"{c}",lineHeight:24,position:"inside",color:"#FFF"},data:e?n:[]}]},i&&"object"===typeof i&&s.setOption(i),window.addEventListener("resize",s.resize),setTimeout((function(){s.resize()}),500)},getSeniority(e){const t=document.getElementById("seniority");if(!t)return!1;const s=this.$echarts.init(t,null,{devicePixelRatio:2});let i,n=[];for(let a in this.seniorityList)this.seniorityList.hasOwnProperty(a)&&n.push({name:a,value:(this.seniorityList[a].length/this.buEmployeeItems.length*100).toFixed(2)});i={tooltip:{alwaysShowContent:!1,trigger:"axis",axisPointer:{type:"shadow"}},color:["#5579ED"],legend:{},grid:{top:"0%",left:"3%",right:"5%",bottom:"7%",containLabel:!0},yAxis:{type:"value",splitNumber:3,axisLabel:{fontSize:"0",show:!1}},xAxis:{type:"category",data:n.map((e=>e.name)),axisTick:{alignWithLabel:!0,count:4},axisLabel:{color:"#535353",fontSize:"12"},axisLine:{lineStyle:{color:"#DBDFE8"}}},series:[{name:"",type:"bar",data:e?n.map((e=>e.value)):[],barWidth:"20",itemStyle:{borderRadius:[3,3,3,3]},label:{lineHeight:20,show:!0,formatter:"{c}%",position:"top",color:"#666666",fontSize:"12"}}]},i&&"object"===typeof i&&s.setOption(i),window.addEventListener("resize",s.resize)}}},p=u,d=s(845),g=(0,d.A)(p,i,n,!1,null,"769386dd",null),v=g.exports},2407:function(e,t,s){s.d(t,{a5:function(){return r},n7:function(){return n},of:function(){return i},y7:function(){return a},zB:function(){return o}});s(4114);function i(e,t){const s=JSON.parse(JSON.stringify(e)),n=Object.keys(e);return n.forEach((n=>{-1!==[null,void 0,""].indexOf(s[n])?delete s[n]:t&&"object"===typeof e[n]&&!Array.isArray(e[n])&&(s[n]=i(s[n]))})),s}function n(e,t){if(!e)return"";const s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=["January","February","March","April","May","June","July","August","September","October","November","December"],n=new Date(e),a=n.getFullYear(),o=String(n.getMonth()+1).padStart(2,0),r=s[n.getMonth()],l=i[n.getMonth()],c=String(n.getDate()).padStart(2,0),m=String(n.getHours()).padStart(2,0),h=String(n.getMinutes()).padStart(2,0),u=String(n.getSeconds()).padStart(2,0);switch(t){case"slash":return`${a}/${o}/${c}`;case"year":return`${a}`;case"monthN":return`${a}-${o}`;case"monthLong":return`${a}-${l}`;case"month":return`${a}-${r}`;case"monthsh":return`${a}/${o}`;case"day":return`${c}-${o}-${a}`;case"timestamp":return`${a}${o}${c}${m}${h}`;case"obj":return{y:a,m:o,d:c,h:m,min:h,s:u};case"normal":return`${a}-${o}-${c} ${m}:${h}:${u}`;case"normalHours":return`${a}-${o}-${c} ${m}`;case"normalMin":return`${a}-${o}-${c} ${m}:${h}`;case"normalDay":return`${a}-${r}-${c}`;case"normalDay2":return`${a}-${o}-${c}`;default:return`${o}-${c}-${a} ${m}:${h}`}}const a=e=>{const t=new Date(e),s=t.getFullYear(),i=t.getMonth(),n=e=>e%4===0&&e%100!==0||e%400===0,a=[31,n(s)?29:28,31,30,31,30,31,31,30,31,30,31][i];return a},o=()=>{let e=["#73A0FA","#73DEB3","#7585A2","#F7C739","#EB7E65","#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc","#379392","#4F86C6","#4F86C6","#6C49B8","#67D5B5","#EE7785","#C89EC4","#84B1ED"];return e},r=(e,t)=>{const s=new Date,i=s.getFullYear(),n=s.getMonth()-(t||0),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=["January","February","March","April","May","June","July","August","September","October","November","December"];let r=[];for(let l=5;l>=0;l--){const t=n-l<0?i-1:i,s=(n-l+12)%12,c=e?o[s]:a[s],m=`${t}-${c}`;r.push(m)}return r}},597:function(e,t,s){e.exports=s.p+"img/select.566d2950.svg"},2687:function(e,t,s){e.exports=s.p+"img/icon_2.1a764baf.svg"},6227:function(e,t,s){e.exports=s.p+"img/icon_6.ffd37528.svg"},2498:function(e,t,s){e.exports=s.p+"img/icon_7.0a915d25.svg"},197:function(e,t,s){e.exports=s.p+"img/icon_8.557a1628.svg"}}]);
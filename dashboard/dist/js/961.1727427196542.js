"use strict";(self["webpackChunkHR_Dashboard"]=self["webpackChunkHR_Dashboard"]||[]).push([[961],{9961:function(e,t,s){s.r(t),s.d(t,{default:function(){return u}});var n=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"summary-bg"},[t("img",{attrs:{width:"430px",src:s(7543)}}),t("div",{staticClass:"summary-line"}),t("div",{staticClass:"title"},[e._v(e._s(e.$route.meta.key))])]),t("div",{staticClass:"content"},[t("div",{staticClass:"content-items"},[t("div",{staticClass:"content-items-content"},[e._m(0),t("van-row",{attrs:{gutter:"16"}},[t("van-col",{staticClass:"in-post-left",attrs:{span:"8"}},[t("div",{staticClass:"in-post-items"},[t("div",{staticClass:"text-center"},[t("p",[e._v("In-post")]),t("p",{staticClass:"text-yellow number"},[e._v(e._s(e._f("formatNumber")(e.inpostAll)))])])]),t("div",{staticClass:"in-post-items"},[t("div",{staticClass:"text-center"},[t("p",[e._v("Forecast YoY")]),t("p",{staticClass:"text-blue2 number"},[e._v(e._s(e._f("formatNumber")(e.forecastAll)))])])])]),t("van-col",{staticClass:"in-post-right",attrs:{span:"16"}},[t("div",[t("div",{staticStyle:{width:"232px",height:"232px"},attrs:{id:"occupation"}})])])],1)],1),t("div",{staticClass:"content-items-content mt-12"},[e._m(1),t("div",{staticClass:"leave-items-content"},[t("div",{ref:"inpost",staticClass:"leave-items",style:{height:60*e.inpostList.length+50+"px"}},[t("van-row",[t("van-col",{staticClass:"leave-items-date pb-0",attrs:{span:"12"}},[e._v(" "+e._s(e.inpostList[e.inpostShow-1]?.the_year||"-")+" ")])],1),t("div",{staticClass:"leave-bar",style:{height:60*e.inpostList.length+12+"px"},attrs:{id:"inpost"}})],1)])])]),t("van-row",{staticClass:"select-box mt-16",attrs:{gutter:"6"}},[t("van-col",{attrs:{span:"12"}},[t("van-sticky",{attrs:{"offset-top":0}},[t("div",{staticClass:"select-box mb-0 justify-center"},[t("span",{on:{click:function(t){e.show=!0}}},[e._v("Select BU |")]),t("span",{staticClass:"ml-8",on:{click:function(t){e.show=!0}}},[e._v(e._s(e.selBu))]),t("img",{attrs:{width:"24px",src:s(597)},on:{click:function(t){e.show=!0}}})])])],1),t("van-col",{staticClass:"justify-end",attrs:{span:"12"}},[t("div",{staticClass:"sel-month"},[t("span",{on:{click:function(t){e.showMonth=!0}}},[e._v(e._s(e.selMonth))]),t("img",{attrs:{width:"24px",src:s(597)},on:{click:function(t){e.showMonth=!0}}})])])],1),t("van-action-sheet",{attrs:{title:"Select",round:!1,actions:e.buLists},on:{select:e.onSelect},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}}),t("van-action-sheet",{attrs:{round:!1},model:{value:e.showMonth,callback:function(t){e.showMonth=t},expression:"showMonth"}},[t("van-datetime-picker",{attrs:{"min-date":e.minDate,type:"year-month",formatter:e.formatter},on:{confirm:e.confirm,cancel:function(t){e.showMonth=!1}},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}})],1),t("div",{staticClass:"content-items del"},[t("div",{staticClass:"content-items-content"},[e._m(2),t("van-row",{staticClass:"gender-total",attrs:{gutter:"14"}},[t("van-col",{attrs:{span:8}},[t("div",{staticClass:"gender-total-items align-center justify-center"},[t("div",{staticClass:"text-center"},[t("p",[t("img",{attrs:{src:s(9367)}})]),t("p",{staticClass:"remark fs-14 text-gray"},[e._v("Female")]),t("p",{staticClass:"number fs-24 text-pink"},[e._v(e._s(e.genderF.length))])])])]),t("van-col",{attrs:{span:8}},[t("div",{staticClass:"gender-total-items align-center justify-center"},[t("div",{staticClass:"text-center"},[t("p",[t("img",{attrs:{src:s(4516)}})]),t("p",{staticClass:"remark fs-14 text-gray"},[e._v("Male")]),t("p",{staticClass:"number fs-24 text-blue3"},[e._v(e._s(e.genderM.length))])])])]),t("van-col",{attrs:{span:8}},[t("div",{staticClass:"gender-total-items align-center justify-center"},[t("div",{staticClass:"text-center"},[t("p",[t("img",{attrs:{src:s(2589)}})]),t("p",{staticClass:"remark fs-14 text-gray"},[e._v("Unknow")]),t("p",{staticClass:"number fs-24 unknown-color"},[e._v(e._s(e.genderU.length))])])])])],1),e._m(3)],1),t("div",{staticClass:"content-items-content mt-12"},[e._m(4),t("div",{staticClass:"percentage-box"},[e._m(5),t("div",{staticClass:"percentage-box-content align-center text-white fs-18 fw-600"},[t("div",{staticClass:"percentage-box-items bg-purple",style:{width:e.getPercentage(e.MgenderF.length,e.Mgender.length)+"%"}},[t("span",[e._v(e._s(e.getPercentage(e.MgenderF.length,e.Mgender.length))+"%")])]),t("div",{staticClass:"percentage-box-items text-right bg-blue",style:{width:e.getPercentage(e.MgenderM.length,e.Mgender.length)+"%"}},[t("span",[e._v(e._s(e.getPercentage(e.MgenderM.length,e.Mgender.length))+"%")])])])]),t("div",{staticClass:"percentage-box"},[e._m(6),t("div",{staticClass:"percentage-box-content align-center text-white fs-18 fw-600"},[t("div",{staticClass:"percentage-box-items bg-purple",style:{width:e.getPercentage(e.MgenderF2.length,e.Mgender2.length)+"%"}},[t("span",[e._v(e._s(e.getPercentage(e.MgenderF2.length,e.Mgender2.length))+"%")])]),t("div",{staticClass:"percentage-box-items text-right bg-blue",style:{width:e.getPercentage(e.MgenderM2.length,e.Mgender2.length)+"%"}},[t("span",[e._v(e._s(e.getPercentage(e.MgenderM2.length,e.Mgender2.length))+"%")])])])]),t("div",{staticClass:"percentage-box"},[e._m(7),t("div",{staticClass:"percentage-box-content align-center text-white fs-18 fw-600"},[t("div",{staticClass:"percentage-box-items bg-purple",style:{width:e.getPercentage(e.OtherGenderF.length,e.OtherGender.length)+"%"}},[t("span",[e._v(e._s(e.getPercentage(e.OtherGenderF.length,e.OtherGender.length))+"%")])]),t("div",{staticClass:"percentage-box-items text-right bg-blue",style:{width:e.getPercentage(e.OtherGenderM.length,e.OtherGender.length)+"%"}},[t("span",[e._v(e._s(e.getPercentage(e.OtherGenderM.length,e.OtherGender.length))+"%")])])])])]),t("div",{staticClass:"content-items-content mt-12"},[e._m(8),t("div",{staticClass:"percentage-box"},[e._m(9),t("div",{staticClass:"percentage-box-content align-center text-white fs-18 fw-600"},[t("div",{staticClass:"percentage-box-items bg-purple",style:{width:e.getPercentage(e.FLMgenderF.length,e.FLMgender.length)+"%"}},[t("span",[e._v(e._s(e.getPercentage(e.FLMgenderF.length,e.FLMgender.length))+"%")])]),t("div",{staticClass:"percentage-box-items text-right bg-blue",style:{width:e.getPercentage(e.FLMgenderM.length,e.FLMgender.length)+"%"}},[t("span",[e._v(e._s(e.getPercentage(e.FLMgenderM.length,e.FLMgender.length))+"%")])])])]),t("div",{staticClass:"percentage-box"},[e._m(10),t("div",{staticClass:"percentage-box-content align-center text-white fs-18 fw-600"},[t("div",{staticClass:"percentage-box-items bg-purple",style:{width:e.getPercentage(e.FLMgenderF2.length,e.FLMgender2.length)+"%"}},[t("span",[e._v(e._s(e.getPercentage(e.FLMgenderF2.length,e.FLMgender2.length))+"%")])]),t("div",{staticClass:"percentage-box-items text-right bg-blue",style:{width:e.getPercentage(e.FLMgenderM2.length,e.FLMgender2.length)+"%"}},[t("span",[e._v(e._s(e.getPercentage(e.FLMgenderM2.length,e.FLMgender2.length))+"%")])])])])])]),t("div",{staticClass:"content-items"},[t("div",{staticClass:"content-items-content"},[e._m(11),t("van-row",{attrs:{gutter:"16"}},[t("van-col",{staticClass:"in-post-left",attrs:{span:"12"}},[t("div",{staticClass:"in-post-items"},[t("div",{staticClass:"text-center"},[t("p",[e._v("Total Positions")]),t("p",{staticClass:"text-yellow number"},[e._v(e._s(e.recruitProcess.total_positions||0))])])])]),t("van-col",{staticClass:"in-post-left",attrs:{span:"12"}},[t("div",{staticClass:"in-post-items"},[t("div",{staticClass:"text-center"},[t("p",[e._v("Onboard")]),t("p",{staticClass:"text-blue number"},[e._v(e._s(e.recruitProcess.onboard||0))])])])]),t("van-col",{staticClass:"in-post-left mt-16",attrs:{span:"12"}},[t("div",{staticClass:"in-post-items"},[t("div",{staticClass:"text-center"},[t("p",[e._v("Current Vacancies")]),t("p",{staticClass:"text-blue2 number"},[e._v(e._s(e.recruitProcess.vacancies||0))])])])]),t("van-col",{staticClass:"in-post-left mt-16",attrs:{span:"12"}},[t("div",{staticClass:"in-post-items"},[t("div",{staticClass:"text-center"},[t("p",[e._v("On Hold")]),t("p",{staticClass:"text-blue2 number"},[e._v(e._s(e.recruitProcess.on_hold||0))])])])]),t("van-col",{staticClass:"in-post-left mt-16",attrs:{span:"12"}},[t("div",{staticClass:"in-post-items"},[t("div",{staticClass:"text-center"},[t("p",[e._v("Filled Rate")]),t("p",{staticClass:"text-blue2 number"},[e._v(e._s(e.recruitProcess.filled_rate||0)+"%")])])])]),t("van-col",{staticClass:"in-post-left mt-16",attrs:{span:"12"}},[t("div",{staticClass:"in-post-items"},[t("div",{staticClass:"text-center"},[t("p",[e._v("Offer Acceptance Rate")]),t("p",{staticClass:"text-blue2 number"},[e._v(e._s(e.recruitProcess.offer_acceptance_rate||0)+"%")])])])])],1)],1)]),t("div",{staticClass:"content-items training"},[t("van-row",{staticClass:"select-box",attrs:{gutter:"6"}},[t("van-col",{attrs:{span:"12"}},[t("span",{staticClass:"fs-20"},[e._v("Training")])]),t("van-col",{attrs:{span:"12 justify-end"}},[t("div",{staticClass:"content-items-title-right"},[e._v("YTD")])])],1),t("van-row",{staticClass:"training-total",attrs:{gutter:"14"}},[t("van-col",{attrs:{span:8}},[t("div",{staticClass:"training-total-items align-center justify-center"},[t("div",{staticClass:"text-center"},[t("p",[t("img",{attrs:{src:s(278)}})]),t("p",{staticClass:"number fs-24 text-blue"},[e._v(e._s(e._f("formatNumber")(e.totalHours)))]),t("p",{staticClass:"remark fs-12 text-gray"},[e._v("Total Training"),t("br"),e._v("Hours")])])])]),t("van-col",{attrs:{span:8}},[t("div",{staticClass:"training-total-items align-center justify-center"},[t("div",{staticClass:"text-center"},[t("p",[t("img",{attrs:{src:s(7399)}})]),t("p",{staticClass:"number fs-24 text-success"},[e._v(e._s(e._f("formatNumber")(e.perHours))+"h")]),t("p",{staticClass:"remark fs-12 text-gray"},[e._v("Training"),t("br"),e._v("Hours/Person")])])])]),t("van-col",{attrs:{span:8}},[t("div",{staticClass:"training-total-items align-center justify-center"},[t("div",{staticClass:"text-center"},[t("p",[t("img",{attrs:{src:s(1525)}})]),t("p",{staticClass:"number fs-24 text-yellow"},[e._v(e._s(e.effectiveness))]),t("p",{staticClass:"remark fs-12 text-gray"},[e._v("Training"),t("br"),e._v("Effectiveness")])])])])],1)],1),t("div",{staticClass:"content-items"},[t("div",{staticClass:"content-items-content"},[e._m(12),t("van-row",{staticClass:"calendar-content",attrs:{gutter:"16"}},e._l(e.leaveMonth,(function(s,n){return t("van-col",{key:n,staticClass:"calendar-list",attrs:{span:"6"}},[t("div",{class:[s.value>50?"danger":"success"]},[t("div",{staticClass:"calendar-text text-center"},[t("p",{staticClass:"fs-18"},[e._v(e._s(s.value||"-")+e._s(s.value?"D":""))]),t("p",{staticClass:"fs-14"},[e._v(e._s(e.getMonth(s.name)))])])])])})),1)],1)]),e._m(13)],1)])},a=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"content-items-title content-items-title-2"},[t("div",[t("img",{attrs:{width:"24px",src:s(3660)}}),t("span",[e._v("Overall In-post")])]),t("div",{staticClass:"content-items-title-right"},[e._v("YTD")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"content-items-title"},[t("span",[e._v("In-post Rate by BU")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"content-items-title"},[t("img",{attrs:{width:"24px",src:s(2024)}}),t("span",[e._v("Gender")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"gender-pie"},[t("div",{staticClass:"pie-content",attrs:{id:"genderPie"}})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"content-items-title"},[t("span",[e._v("Gender Distribution by Grade")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"percentage-box-title fs-14 text-yellow"},[t("span",[e._v("Management Grade (B)")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"percentage-box-title fs-14 text-yellow"},[t("span",[e._v("Management Grade (C)")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"percentage-box-title fs-14 text-yellow"},[t("span",[e._v("Other Grade (D/E/F)")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"content-items-title"},[t("span",[e._v("Gender Distribution by FL VS. Office")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"percentage-box-title fs-14 text-yellow"},[t("span",[e._v("FL")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"percentage-box-title fs-14 text-yellow"},[t("span",[e._v("Office")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"content-items-title content-items-title-2"},[t("div",[t("img",{attrs:{width:"24px",src:s(2024)}}),t("span",[e._v("Recruitment Process")])]),t("div",{staticClass:"content-items-title-right"},[e._v("YTD")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"content-items-title"},[t("img",{attrs:{width:"24px",src:s(8640)}}),t("span",[e._v("Annual Leaves Calender")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"content-items"},[t("div",{staticClass:"content-items-content"},[t("div",{staticClass:"content-items-title"},[t("img",{attrs:{width:"24px",src:s(5683)}}),t("span",[e._v("Sick Leave Caculation")])]),t("div",{staticClass:"monthy"},[t("div",{staticClass:"monthy-bar",attrs:{id:"sickBar"}})])])])}],i=(s(4114),s(7349)),r=s(3011),o=s(5520),l=s(2407),c=s(8193),h={name:"coreKPI",components:{Row:i.A,Col:r.A,Sticky:o.A},data(){const e={common:{pageNum:1,pageSize:2e3,returnTotalNum:"true"}};return{...e,minDate:new Date("1970-01-01"),colors:(0,l.zB)(),currentDate:new Date((new Date).setMonth((new Date).getMonth())),showMonth:!1,show:!1,overview:null,bybu:null,selBu:"",selMonth:(0,l.n7)(new Date((new Date).setMonth((new Date).getMonth())),"month"),selMonthN:(0,l.n7)(new Date((new Date).setMonth((new Date).getMonth())),"normalDay2"),buLists:[],inpostList:[],inpostShow:1,empVSHeadcount:[],buLists:[],genderF:0,genderM:0,genderU:0,MgenderF:0,MgenderM:0,MgenderF2:0,MgenderM2:0,OtherGenderF:0,OtherGenderM:0,Mgender:0,Mgender2:0,OtherGender:0,otherAgeByGradeTotal:[],MAgeByGradeTotal:[],showData:!1,ageLevelItems:{},FLMgenderF:0,FLMgenderM:0,FLMgenderF2:0,FLMgenderM2:0,FLMgender:0,FLMgender2:0,recruitStat:[],recruited:0,vacancy:0,remain:0,totalPositions:0,onHold:0,currentVacancies:0,onboard:0,trainingEmpStat:[],trainingYTD:[],perHours:0,totalHours:0,effectivenessArr:[],leaveDTLMonth:[],leaveDTLMonthYTD:[],recruitProcess:{},recruitOnboard:[]}},computed:{inpostAll(){const e=this.empVSHeadcount.map((e=>e.emp_cnt));let t=e.reduce(((e,t)=>e+t),0);return t},forecastAll(){const e=this.empVSHeadcount.map((e=>e.forecast));let t=e.reduce(((e,t)=>e+t),0);return t},employee(){return this.hrEmployee.filter((e=>{const t=new Date((0,l.n7)(new Date(e.resign_date),"monthN")).getTime(),s=new Date((0,l.n7)(new Date(e.hire_date),"monthN")).getTime(),n=(0,l.n7)(new Date((new Date).setMonth(new Date(this.selMonthN).getMonth())),"monthN");if(t>new Date(n).getTime()&&s<=new Date(n).getTime()||!e.resign_date&&s<=new Date(n).getTime())return e}))},employeeItems(){const e={};return this.employee.forEach((t=>{e[t.bu_code]=e[t.bu_code]||[],e[t.bu_code].push(t)})),e},MAgeByGrade(){this.MAgeByGradeTotal=[];let e=[];for(let t in this.ageLevelItems){let s=[];this.ageLevelItems.hasOwnProperty(t)&&(s=this.ageLevelItems[t].filter((e=>["B","C"].indexOf(e.emp_level)>-1)),e.push({sortby:parseInt(t.substring(0,2))||100,name:t,data:s}),this.MAgeByGradeTotal=this.MAgeByGradeTotal.concat(s))}return e=[...e].sort(((e,t)=>e.sortby-t.sortby)),e},otherAgeByGrade(){this.otherAgeByGradeTotal=[];let e=[];for(let t in this.ageLevelItems){let s=[];this.ageLevelItems.hasOwnProperty(t)&&(s=this.ageLevelItems[t].filter((e=>["D","E","F"].indexOf(e.emp_level)>-1)),e.push({sortby:parseInt(t.substring(0,2))||100,name:t,data:s}),this.otherAgeByGradeTotal=this.otherAgeByGradeTotal.concat(s))}return e=[...e].sort(((e,t)=>e.sortby-t.sortby)),e},trainingEmpStatItems(){const e={};return this.trainingEmpStat.forEach((t=>{e[t.bu_code]=e[t.bu_code]||[],e[t.bu_code].push(t)})),e},leaveDTLItems(){return this.leaveDTLMonth.filter((e=>["Annual Leave","J04"].indexOf(e.leave_code)>-1))},leaveDTLYTDItems(){return this.leaveDTLMonthYTD.filter((e=>["Sick Leave","Annual Leave","J01","J02","J04","J05"].indexOf(e.leave_code)>-1))},leaveDTLMonthYTDItems(){const e={};return this.leaveDTLMonthYTD.forEach((t=>{e[t.the_month]=e[t.the_month]||[],e[t.the_month].push(t)})),e},leaveDTLMonthItems(){const e={};return this.leaveDTLItems.forEach((t=>{e[t.the_month]=e[t.the_month]||[],e[t.the_month].push(t)})),e},leaveMonth(){let e=[];for(let s in this.leaveDTLMonthItems)if(this.leaveDTLMonthItems.hasOwnProperty(s)){let t=s.split("-")?.[0],n=s.split("-")?.[1],a=new Date(s+"-01").getMonth()+1,i=this.getleaveMonth(t,n,"leaveDTLMonthItems").filter((e=>e));const r=i.filter((e=>e&&e.leave_days&&null!=e.leave_days)).map((e=>e.leave_days)).reduce(((e,t)=>e+t),0),o=r/this.getEmployeeNow(s).length;let l=o?o.toFixed(1):0;const c=new Date(this.selMonthN).getMonth()+1;a>c&&(l=0),e.push({id:a,name:s,value:l})}let t=[];for(let s=1;s<=12;s++){let n=[];n=e.filter((e=>e.id==s)),n.length||(n=[{id:s,name:this.selYear+"-"+s,value:0}]),t=t.concat(n)}return t},employeeItemsAll(){const e={};return this.hrEmployee.forEach((t=>{e[t.bu_code]=e[t.bu_code]||[],e[t.bu_code].push(t)})),Object.values(e)},employeeList(){const e={};let t=new Date;for(let s in this.employeeItemsAll){let n=[];e[this.employeeItemsAll[s]?.[0].bu_code]=[];for(let a=0;a<6;a++)n=this.employeeItemsAll[s].filter((e=>{const s=new Date((0,l.n7)(new Date(e.resign_date),"monthN")).getTime(),n=new Date((0,l.n7)(new Date(e.hire_date),"monthN")).getTime(),i=new Date((0,l.n7)(new Date(t.setMonth((new Date).getMonth()-a)),"monthN"));if(s>new Date(i).getTime()&&n<=new Date(i).getTime()||!e.resign_date&&n<=new Date(i).getTime())return e})),e[this.employeeItemsAll[s]?.[0].bu_code].push({value:n.length,month:a,bu_code:this.employeeItems[s]?.[0].bu_code})}return Object.values(e)},trendBarList(){let e=[];for(let s in this.employeeList)e=e.concat(this.employeeList[s]||[]);let t={};return e.forEach((e=>{t[e.month]=t[e.month]||[],t[e.month].push(e)})),Object.values(t).reverse()},effectiveness(){const e=this.effectivenessArr.filter((e=>e.bu_code===this.selBu));return parseFloat((e?.[0]?.effectiveness||0).toFixed(2))}},async mounted(){this.buLists=[{name:"Overview",value:"Overview"}].concat(this.buList),this.buEmployeeItems=this.employee,this.selBu="Overview",await this.getEmpVSHeadcount(),this.$nextTick((()=>{this.showData=!0,this.setEcharsDI(),this.setEcharsH(),this.setEcharsRec(),this.setEcharsTrain(),this.setEcharsAttend()}))},watch:{selBu(){this.setData()},showData(){this.setData()}},methods:{getLastSixMonths:l.a5,arrDistinct:l.CA,setEchartColor:l.zB,getleaveMonth(e,t,s){let n=[];const a=e+"-"+String(t).padStart(2,0);return n=this[s][a],n},setData(){this.genderF=this.buEmployeeItems.filter((e=>"F"===e.gender)),this.genderM=this.buEmployeeItems.filter((e=>"M"===e.gender)),this.genderU=this.buEmployeeItems.filter((e=>"U"===e.gender)),this.Mgender=this.buEmployeeItems.filter((e=>["B"].indexOf(e.emp_level)>-1&&"U"!==e.gender)),this.Mgender2=this.buEmployeeItems.filter((e=>["C"].indexOf(e.emp_level)>-1&&"U"!==e.gender)),this.OtherGender=this.buEmployeeItems.filter((e=>["D","E","F"].indexOf(e.emp_level)>-1&&"U"!==e.gender)),this.MgenderF=this.buEmployeeItems.filter((e=>["B"].indexOf(e.emp_level)>-1&&"F"===e.gender)),this.MgenderF2=this.buEmployeeItems.filter((e=>["C"].indexOf(e.emp_level)>-1&&"F"===e.gender)),this.OtherGenderF=this.buEmployeeItems.filter((e=>["D","E","F"].indexOf(e.emp_level)>-1&&"F"===e.gender)),this.MgenderM=this.buEmployeeItems.filter((e=>["B"].indexOf(e.emp_level)>-1&&"M"===e.gender)),this.MgenderM2=this.buEmployeeItems.filter((e=>["C"].indexOf(e.emp_level)>-1&&"M"===e.gender)),this.OtherGenderM=this.buEmployeeItems.filter((e=>["D","E","F"].indexOf(e.emp_level)>-1&&"M"===e.gender)),this.FLMgender=this.buEmployeeItems.filter((e=>"Y"===e.is_frontline&&"U"!==e.gender)),this.FLMgender2=this.buEmployeeItems.filter((e=>"N"===e.is_frontline&&"U"!==e.gender)),this.FLMgenderF=this.buEmployeeItems.filter((e=>"Y"===e.is_frontline&&"F"===e.gender)),this.FLMgenderF2=this.buEmployeeItems.filter((e=>"N"===e.is_frontline&&"F"===e.gender)),this.FLMgenderM=this.buEmployeeItems.filter((e=>"Y"===e.is_frontline&&"M"===e.gender)),this.FLMgenderM2=this.buEmployeeItems.filter((e=>"N"===e.is_frontline&&"M"===e.gender)),this.$forceUpdate()},getPercentage(e,t,s){return 2===s?Math.round(e/t*100):(e/t*100).toFixed(2)},async setEcharsDI(){this.getPenderPie(!0),this.ageLevelItems={},this.buEmployeeItems.forEach((e=>{this.ageLevelItems[e.age_group]=this.ageLevelItems[e.age_group]||[],this.ageLevelItems[e.age_group].push(e)})),this.observer=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?this.getPenderPie(!0):this.getPenderPie(!1)}))})),this.observer.observe(document.getElementById("genderPie"))},async setEcharsH(){this.getOccupation(!0),this.inpostShow=1,this.getInpost(this.inpostList),this.observerH=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?this.getOccupation(!0):this.getOccupation(!1)}))})),this.observerH.observe(document.getElementById("occupation")),this.observerH2=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?this.getInpost(this.inpostList):this.getInpost([])}))})),this.observerH2.observe(document.getElementById("inpost"))},async getEmpVSHeadcount(){const e=await c.pi(this.$options.data().common);this.empVSHeadcount=e.rows,this.inpostList=e.rows},getOccupation(e){const t=document.getElementById("occupation");if(!t)return!1;let s;this.myChartOccupation&&this.myChartOccupation.dispose(),this.myChartOccupation=this.$echarts.init(t,null,{devicePixelRatio:2});const n=[{value:(this.inpostAll/this.forecastAll*100).toFixed(2),name:"In-post / Forecast",title:{offsetCenter:["0%","13%"],fontSize:12},detail:{valueAnimation:!0,offsetCenter:["0%","-7%"],fontSize:20}}];s={color:["#5579ED"],series:[{type:"gauge",startAngle:90,endAngle:-270,pointer:{show:!1},progress:{show:!0,overlap:!1,roundCap:!0,clip:!1},axisLine:{lineStyle:{width:10}},splitLine:{show:!1,distance:0,length:10},axisTick:{show:!1},axisLabel:{show:!1,distance:50},data:e?n:[],title:{fontSize:14},detail:{width:50,height:14,fontSize:14,color:"inherit",borderColor:"inherit",formatter:"{value}%"}}]},s&&"object"===typeof s&&this.myChartOccupation.setOption(s),window.addEventListener("resize",this.myChartOccupation.resize)},getInpost(e){const t=document.getElementById("inpost");if(!t)return!1;let s;this.myChartInpost&&this.myChartInpost.dispose(),this.myChartInpost=this.$echarts.init(t,null,{devicePixelRatio:2}),e.map((e=>{e.value=(e.emp_cnt/e.forecast*100).toFixed(2)})),e=[...e].sort(((e,t)=>e.value-t.value)),s={color:["#5579ED"],tooltip:{alwaysShowContent:!1,trigger:"axis",axisPointer:{type:"shadow"}},legend:{bottom:"3%",right:"5%",icon:"circle",itemHeight:8,itemWidth:8,itemGap:20,lineHeight:24,textStyle:{fontSize:"12",color:"#666666"}},grid:{top:"5%",left:"5%",right:"6.5%",bottom:"11%",containLabel:!0},xAxis:{type:"value",axisLabel:{show:!1,fontSize:0,color:"transparent"},splitLine:{show:!1,lineStyle:{color:"#EEEEEE"}}},yAxis:{type:"category",data:e.length?e.map((e=>e.bu_code)):[],axisTick:{show:!1},max:"100",axisLabel:{color:"#333333",fontSize:"12"},axisLine:{lineStyle:{color:"#EEEEEE"}}},series:[{name:"In-post / Forecast",type:"bar",showBackground:!0,barGap:"0.3",backgroundStyle:{color:"#EEF0F6"},data:e,barWidth:"16",itemStyle:{borderRadius:[2,2,2,2]},label:{show:!0,formatter:"{c}%",position:["85%","-14"],color:"#5579ED",fontSize:"12"}}]},s&&"object"===typeof s&&this.myChartInpost.setOption(s),window.addEventListener("resize",this.myChartInpost.resize),setTimeout((()=>{this.myChartInpost.resize()}),500)},formatter(e,t){return"year"===e?`${t}年`:"month"===e?`${t}月`:t},confirm(e){this.showData=!1,this.showMonth=!1,this.selMonth=(0,l.n7)(new Date(e),"month"),this.selMonthN=(0,l.n7)(new Date(e),"normalDay2"),"Overview"===this.selBu?this.buEmployeeItems=this.employee||[]:this.buEmployeeItems=this.employeeItems[this.selBu]||[],this.buEmployeeItems=[...this.buEmployeeItems],this.$forceUpdate(),this.$nextTick((()=>{this.showData=!0,this.setEcharsDI()}))},onSelect(e){"Overview"===e.value?this.buEmployeeItems=this.employee||[]:this.buEmployeeItems=this.employeeItems[e.value]||[],this.$forceUpdate(),this.show=!1,this.selBu=e.value,this.$nextTick((()=>{this.showData=!0,this.setEcharsDI(),this.setEcharsRec(),this.setEcharsAttend()}))},getPenderPie(e){const t=document.getElementById("genderPie");if(!t)return!1;let s;this.myChartPenderPie&&this.myChartPenderPie.dispose(),this.myChartPenderPie=this.$echarts.init(t,null,{devicePixelRatio:2}),s={tooltip:{alwaysShowContent:!1,trigger:"item",axisPointer:{type:"shadow"},formatter:function(e){return e?.data?.name+"\n"+e?.data?.data}},color:["#CDABC7","#9586A2","#7E97DC"],legend:{position:"center",bottom:"7%",icon:"circle",itemHeight:8,itemWidth:8,itemGap:18,textStyle:{fontSize:12,color:"#9D8F9B"}},series:[{name:"",type:"pie",center:["51%","44%"],radius:"60%",data:e?[{data:this.genderF.length,value:(this.genderF.length/this.buEmployeeItems.length*100).toFixed(2),name:"F"},{data:this.genderU.length,value:(this.genderU.length/this.buEmployeeItems.length*100).toFixed(2),name:"U"},{data:this.genderM.length,value:(this.genderM.length/this.buEmployeeItems.length*100).toFixed(2),name:"M"}]:[],label:{formatter:"{b}: {c}%",lineHeight:10,fontSize:10.5,color:"#9D8F9B",distance:20},labelLine:{normal:{show:!0,length:7,length2:3}}}]},s&&"object"===typeof s&&this.myChartPenderPie.setOption(s),window.addEventListener("resize",this.myChartPenderPie.resize)},async getRecruitProcess(){const e=await c.ew((0,l.of)({...this.$options.data().common,bu_code:"Overview"===this.selBu?"":this.selBu,begin_month:(0,l.n7)((new Date).setMonth(0),"monthN"),end_month:(0,l.n7)(new Date,"monthN")})),t=e.rows.filter((e=>e.the_year==(new Date).getFullYear())),s=t.map((e=>e.total_positions)).reduce(((e,t)=>e+t),0),n=t.map((e=>e.onboard)).reduce(((e,t)=>e+t),0),a=t.map((e=>e.vacancies)).reduce(((e,t)=>e+t),0),i=t.map((e=>e.on_hold)).reduce(((e,t)=>e+t),0),r=t.map((e=>e.offer_acceptance_rate)).reduce(((e,t)=>e+t),0);this.recruitProcess={total_positions:s,onboard:n,vacancies:a,on_hold:i,filled_rate:parseFloat((n/s*100).toFixed(2)),offer_acceptance_rate:r}},async setEcharsRec(){this.getRecruitProcess()},async setEcharsTrain(){this.getTrainingEmpStat(),this.getTrainingYTD(),this.getTrainingEffectiveness()},async getTrainingYTD(){const e=await c.UF({...this.$options.data().common,the_year:(0,l.n7)(new Date,"year")});this.trainingYTD=e.rows;const t=this.arrDistinct(e.rows,"emp_id"),s=e.rows.map((e=>e.get_study_hours)).reduce(((e,t)=>e+t),0);this.totalHours=parseFloat(s.toFixed(2)),this.perHours=parseFloat((s/t.length||0).toFixed(2))},async getTrainingEffectiveness(){const e=await c.DN({...this.$options.data().common,the_year:(0,l.n7)(new Date,"year")});this.effectivenessArr=e.rows},async getTrainingEmpStat(){const e=await c.bC({...this.$options.data().common,begin_month:(0,l.n7)((new Date).setMonth(0),"monthN"),end_month:(0,l.n7)(new Date,"monthN")});this.trainingEmpStat=e.rows},async setEcharsAttend(){this.getLeaveByMonthYTD(),await this.getLeaveByMonth(),this.getMonthyBar("sickBar",!0),this.observerAttend=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?this.getMonthyBar("sickBar",!0):this.getMonthyBar("sickBar",!1)}))})),this.observerAttend.observe(document.getElementById("sickBar"))},getMonth(e){return new Date(e).toLocaleDateString("en-US",{month:"short"})},async getLeaveByMonth(){const e=await c.VD((0,l.of)({...this.$options.data().common,bu_code:"Overview"===this.selBu?"":this.selBu,begin_month:(0,l.n7)(new Date,"year")+"-01",end_month:(0,l.n7)(new Date,"year")+"-12"}));this.leaveDTLMonth=e.rows},async getLeaveByMonthYTD(){const e=await c.VD({...this.$options.data().common,begin_month:(0,l.n7)(new Date((new Date).setMonth((new Date).getMonth()-5)),"monthN"),end_month:(0,l.n7)(new Date((new Date).setMonth((new Date).getMonth())),"monthN")});this.leaveDTLMonthYTD=e.rows},getMonthyBar(e,t){const s=document.getElementById(e);if(!s)return!1;"sickBar"===e&&this.myChartSickBar&&this.myChartSickBar.dispose(),"sickBar"===e&&(this.myChartSickBar=this.$echarts.init(s,null,{devicePixelRatio:2}));let n=[],a=0;for(let o in this.leaveDTLMonthYTDItems){if(this.leaveDTLMonthYTDItems.hasOwnProperty(o)){let t="sickBar"===e?["B01","J03","Sick Leave"]:["Annual Leave","J01","J02","J04"],s=this.leaveDTLMonthYTDItems[o];"sickBar"===e&&(s=this.leaveDTLMonthYTDItems[o].filter((e=>t.indexOf(e.leave_code)>-1)));const i=this.getTrendBarTotal()[a],r=s.filter((e=>e&&e.leave_days&&null!=e.leave_days)).map((e=>e.leave_days)).reduce(((e,t)=>e+t),0),l=i?(r/i).toFixed(2):0;n.push({name:o,value:l})}a++}n=[...n].sort(((e,t)=>Number(e.name.slice(-2))-Number(t.name.slice(-2))));let i,r=[];"monthyBar"===e?r=["#5579ED"]:"sickBar"===e&&(r=["#FF860F"]),i={tooltip:{alwaysShowContent:!1,trigger:"axis",axisPointer:{type:"shadow"}},color:r,legend:{},grid:{top:"10%",left:"3%",right:"5%",bottom:"6%",containLabel:!0},yAxis:{type:"value",splitNumber:3,show:!1,axisLabel:{fontSize:"0",show:!1,color:"transparent"}},xAxis:{type:"category",data:this.getLastSixMonths(),axisTick:{alignWithLabel:!0,count:4},axisLabel:{color:"#666666",fontSize:"8"},axisLine:{lineStyle:{color:"#DBDFE8"}}},series:[{name:"",type:"bar",data:t?n.map((e=>e.value)):[],barWidth:"20",itemStyle:{borderRadius:[3,3,3,3]},label:{lineHeight:16,show:!0,formatter:"{c}D",position:"top",color:"#535353",fontSize:"12"}}]},i&&"object"===typeof i&&this.myChartSickBar.setOption(i),window.addEventListener("resize",this.myChartSickBar.resize)},getTrendBarTotal(e){let t=[];for(let s=0;s<6;s++){const e=this.trendBarList[s].map((e=>e.value));let n=e.reduce(((e,t)=>e+t),0);t.push(n)}return t},getEmployeeNow(e){return this.hrEmployee.filter((t=>{const s=new Date((0,l.n7)(new Date(t.resign_date),"monthN")).getTime(),n=new Date((0,l.n7)(new Date(t.hire_date),"monthN")).getTime(),a=(0,l.n7)(new Date((new Date).setMonth(new Date(e).getMonth())),"monthN");if(s>new Date(a).getTime()&&n<=new Date(a).getTime()||!t.resign_date&&n<=new Date(a).getTime())return t}))}}},g=h,d=s(845),m=(0,d.A)(g,n,a,!1,null,"e5330d4c",null),u=m.exports},2407:function(e,t,s){s.d(t,{CA:function(){return l},a5:function(){return o},n7:function(){return a},of:function(){return n},y7:function(){return i},zB:function(){return r}});s(4114);function n(e,t){const s=JSON.parse(JSON.stringify(e)),a=Object.keys(e);return a.forEach((a=>{-1!==[null,void 0,""].indexOf(s[a])?delete s[a]:t&&"object"===typeof e[a]&&!Array.isArray(e[a])&&(s[a]=n(s[a]))})),s}function a(e,t){if(!e)return"";const s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n=["January","February","March","April","May","June","July","August","September","October","November","December"],a=new Date(e),i=a.getFullYear(),r=String(a.getMonth()+1).padStart(2,0),o=s[a.getMonth()],l=n[a.getMonth()],c=String(a.getDate()).padStart(2,0),h=String(a.getHours()).padStart(2,0),g=String(a.getMinutes()).padStart(2,0),d=String(a.getSeconds()).padStart(2,0);switch(t){case"slash":return`${i}/${r}/${c}`;case"year":return`${i}`;case"monthN":return`${i}-${r}`;case"monthLong":return`${i}-${l}`;case"month":return`${i}-${o}`;case"monthsh":return`${i}/${r}`;case"day":return`${c}-${r}-${i}`;case"timestamp":return`${i}${r}${c}${h}${g}`;case"obj":return{y:i,m:r,d:c,h:h,min:g,s:d};case"normal":return`${i}-${r}-${c} ${h}:${g}:${d}`;case"normalHours":return`${i}-${r}-${c} ${h}`;case"normalMin":return`${i}-${r}-${c} ${h}:${g}`;case"normalDay":return`${i}-${o}-${c}`;case"normalDay2":return`${i}-${r}-${c}`;case"normalDay3":return`${i}-${l}-${c}`;case"normalDay4":return`${i}/${l}/${c}`;default:return`${r}-${c}-${i} ${h}:${g}`}}const i=e=>{const t=new Date(e),s=t.getFullYear(),n=t.getMonth(),a=e=>e%4===0&&e%100!==0||e%400===0,i=[31,a(s)?29:28,31,30,31,30,31,31,30,31,30,31][n];return i},r=()=>{let e=["#73A0FA","#73DEB3","#7585A2","#F7C739","#EB7E65","#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc","#379392","#4F86C6","#4F86C6","#6C49B8","#67D5B5","#EE7785","#C89EC4","#84B1ED"];return e},o=(e,t,s)=>{const n=s?new Date(s):new Date,a=n.getFullYear(),i=n.getMonth()-(t||0),r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=["January","February","March","April","May","June","July","August","September","October","November","December"];let l=[];for(let c=5;c>=0;c--){const t=i-c<0?a-1:a,s=(i-c+12)%12,n=e?o[s]:r[s],h=`${t}-${n}`;l.push(h)}return l},l=(e,t)=>{let s=e.reduce(((e,s)=>{const n=e.find((e=>e[t]===s[t]));return n?e:e.concat([s])}),[]);return s}},8640:function(e,t,s){e.exports=s.p+"img/icon_1.38a41e40.svg"},5683:function(e,t,s){e.exports=s.p+"img/icon_2.1636ef31.svg"},597:function(e,t,s){e.exports=s.p+"img/select.566d2950.svg"},7543:function(e,t,s){e.exports=s.p+"img/summary_bg.f2a0fc2b.svg"},9367:function(e,t,s){e.exports=s.p+"img/female.7c80b5b2.svg"},2024:function(e,t,s){e.exports=s.p+"img/icon_1.7283ab4a.svg"},4516:function(e,t,s){e.exports=s.p+"img/male.9dbc4324.svg"},2589:function(e,t,s){e.exports=s.p+"img/unisex.968e62c4.svg"},3660:function(e,t,s){e.exports=s.p+"img/icon_1.ca2f156c.svg"},1525:function(e,t,s){e.exports=s.p+"img/icon_1.9a70e0a0.svg"},278:function(e,t,s){e.exports=s.p+"img/icon_2.7bf157dd.svg"},7399:function(e,t,s){e.exports=s.p+"img/icon_3.7dc01385.svg"}}]);
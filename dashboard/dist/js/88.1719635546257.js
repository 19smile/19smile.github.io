"use strict";(self["webpackChunktenant_portal"]=self["webpackChunktenant_portal"]||[]).push([[88],{2088:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[e("van-sticky",{attrs:{"offset-top":48}},[e("van-row",{staticClass:"select-box",attrs:{gutter:"6"}},[e("van-col",{attrs:{span:"12"}},[e("span",{staticClass:"fs-20"},[t._v("Overview")])]),e("van-col",{staticClass:"justify-end",attrs:{span:"12"}},[e("div",{staticClass:"sel-month"},[e("span",{on:{click:function(e){t.showMonth=!0}}},[t._v(t._s(t.selMonth))]),e("img",{attrs:{width:"24px",src:a(597)},on:{click:function(e){t.showMonth=!0}}})])])],1)],1),e("van-action-sheet",{attrs:{round:!1},model:{value:t.showMonth,callback:function(e){t.showMonth=e},expression:"showMonth"}},[e("van-datetime-picker",{attrs:{type:"year-month",formatter:t.formatter},on:{confirm:t.confirm,cancel:function(e){t.showMonth=!1}},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1),e("div",{staticClass:"content-items"},[e("div",{staticClass:"content-items-content"},[e("div",{staticClass:"content-items-title content-items-title-2"},[t._m(0),e("div",{staticClass:"content-items-title-right"},[e("span",{staticClass:"fs-20"},[t._v("Avg. "+t._s(t.average||0)+"%")])])]),e("div",{staticClass:"recruit"},[e("div",{staticClass:"recruit-items",style:{height:35*Object.values(t.leaveStatStatItems)?.length+48+"px"}},[e("van-row",[e("van-col",{staticClass:"recruit-items-title",attrs:{span:"12"}},[t._v(" Leave By Bu. ")])],1),e("div",{staticClass:"recruit-bar",style:{height:35*Object.values(t.leaveStatStatItems)?.length+"px"},attrs:{id:"recruit"}})],1)])])]),e("div",{staticClass:"content-items"},[e("div",{staticClass:"content-items-content"},[e("div",{staticClass:"percentage-box pb-8"},[t._m(1),e("div",{staticClass:"percentage-box-content align-center text-white fs-14 fw-600 percentage-mini percentage-box-content-mini"},[e("div",{staticClass:"percentage-box-items bg-gray",style:{width:"24%"}}),e("div",{staticClass:"percentage-box-items text-center bg-yellow",style:{width:"26%"}},[t._v("26%")]),e("div",{staticClass:"percentage-box-items text-center bg-blue4",style:{width:"40%"}},[t._v("40%")]),e("div",{staticClass:"percentage-box-items bg-gray",style:{width:"10%"}})]),e("van-row",{staticClass:"fs-14 lh-32",attrs:{gutter:"16"}},[e("van-col",{staticClass:"text-yellow text-right",attrs:{span:"12"}},[t._v("Management")]),e("van-col",{staticClass:"text-blue",attrs:{span:"12"}},[t._v("Non-Management")])],1)],1)])]),e("div",{staticClass:"content-items"},[e("div",{staticClass:"content-items-content"},[t._m(2),e("div",{staticClass:"recruit parental"},[e("div",{staticClass:"recruit-items"},[e("van-row",[e("van-col",{staticClass:"recruit-items-title",attrs:{span:"12"}},[t._v(" Maternity Leave ")])],1),e("div",{staticClass:"recruit-bar",attrs:{id:"parental"}})],1)]),e("div",{staticClass:"recruit parental mt-16"},[e("div",{staticClass:"recruit-items"},[e("van-row",[e("van-col",{staticClass:"recruit-items-title",attrs:{span:"12"}},[t._v(" Childcare Leave ")])],1),e("div",{staticClass:"recruit-bar",attrs:{id:"parental2"}})],1)])])])],1)},n=[function(){var t=this,e=t._self._c;return e("div",[e("img",{attrs:{width:"24px",src:a(7845)}}),e("span",[t._v("Annual Leave Usage")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"percentage-box-title fs-14 text-yellow"},[e("span",[t._v("Management Ratio")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"content-items-title"},[e("div",[e("img",{attrs:{width:"24px",src:a(6212)}}),e("span",[t._v("Parental Leave Usage")])])])}],i=(a(4114),a(7349)),r=a(3011),o=a(7967),c=a(2407),l=a(8193),u={name:"welfare",components:{Row:i.A,Col:r.A,ActionSheet:o.A},data(){const t={common:{pageNum:1,pageSize:2e3,returnTotalNum:"true"}};return{...t,currentDate:new Date,showMonth:!1,selYear:(0,c.n7)(new Date,"year"),selMonth:(0,c.n7)(new Date,"month"),leaveStatStat:[],average:0}},created(){this.$nextTick((()=>{this.setEchars()}))},watch:{},computed:{leaveStatStatItems(){const t={};return this.leaveStatStat.forEach((e=>{t[e.bu_code]=t[e.bu_code]||[];new Date(this.selMonth).getMonth();t[e.bu_code].push(e)})),t}},methods:{async setEchars(){await this.getLeaveStat(),this.getRecruit(!0),this.getParental("",!0),this.getParental("2",!0),this.observer=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting?this.getRecruit(!0):this.getRecruit(!1)}))})),this.observer.observe(document.getElementById("recruit")),this.observer2=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting?this.getParental("",!0):this.getParental("",!1)}))})),this.observer2.observe(document.getElementById("parental")),this.observer3=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting?this.getParental("2",!0):this.getParental("2",!1)}))})),this.observer3.observe(document.getElementById("parental2"))},async getLeaveStat(){const t=await l.qm((0,c.of)({...this.$options.data().common,the_year:this.selYear}));this.leaveStatStat=t.rows},formatter(t,e){return"year"===t?`${e}年`:"month"===t?`${e}月`:e},confirm(t){this.showMonth=!1,this.selYear=(0,c.n7)(new Date(t),"year"),this.selMonth=(0,c.n7)(new Date(t),"month"),this.setEchars(),console.log(t)},getRecruit(t){const e=document.getElementById("recruit");if(!e)return!1;const a=this.$echarts.init(e,null,{devicePixelRatio:2});let s=[],n=1;for(let o in this.leaveStatStatItems)if(n++,this.leaveStatStatItems.hasOwnProperty(o)){let t={};t=n%2===0?{color:"#5579ED"}:{color:"#A3CCF8"};const e=this.leaveStatStatItems[o].map((t=>t.leave_days)),a=e.reduce(((t,e)=>t+e),0),i=this.leaveStatStatItems[o].map((t=>t.annualleave_should_used_days||0)),r=i.reduce(((t,e)=>t+e),0);s.push({name:o,total:a&&r?a/r*100:0,value:(a/r*100).toFixed(2),itemStyle:t})}console.log(s.map((t=>t.total)));const i=s.map((t=>t.total)).reduce(((t,e)=>t+e),0);let r;this.average=(i/Object.values(this.leaveStatStatItems).length).toFixed(2),r={color:["#5579ED"],tooltip:{alwaysShowContent:!1,trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{top:"0%",left:"7%",right:"13%",bottom:"9px",containLabel:!0},xAxis:{type:"value",axisLabel:{show:!1,fontSize:0,color:"transparent"},splitLine:{show:!0,lineStyle:{color:"#EEEEEE"}}},yAxis:{type:"category",data:s.map((t=>t.name)),axisTick:{show:!1},axisLabel:{color:"#333333",fontSize:"12"},axisLine:{lineStyle:{color:"#EEEEEE"}}},series:[{name:"",type:"bar",data:t?s:[],barWidth:"16",itemStyle:{borderRadius:[2,2,2,2]},label:{show:!0,formatter:"{c}%",position:"outside",color:"#7CA0CE",fontSize:"12"}}]},r&&"object"===typeof r&&a.setOption(r),window.addEventListener("resize",a.resize),setTimeout((function(){a.resize()}),500)},getParental(t,e){const a=document.getElementById("parental"+t);if(!a)return!1;const s=this.$echarts.init(a,null,{devicePixelRatio:2});let n;n={color:["#5579ED"],tooltip:{alwaysShowContent:!1,trigger:"axis",axisPointer:{type:"shadow"}},legend:{},grid:{top:"0%",left:"7%",right:"13%",bottom:"9px",containLabel:!0},xAxis:{type:"value",axisLabel:{show:!1,fontSize:0,color:"transparent"},splitLine:{show:!0,lineStyle:{color:"#EEEEEE"}}},yAxis:{type:"category",data:["On Leave","Leaving"],axisTick:{show:!1},axisLabel:{color:"#333333",fontSize:"12"},axisLine:{lineStyle:{color:"#EEEEEE"}}},series:[{name:"",type:"bar",data:e?[{value:32,itemStyle:{color:"#A3CCF8"}},{value:38,itemStyle:{color:"#5579ED"}}]:[],barWidth:"16",itemStyle:{borderRadius:[2,2,2,2]},label:{show:!0,formatter:"{c}%",position:"outside",color:"#7CA0CE",fontSize:"12"}}]},n&&"object"===typeof n&&s.setOption(n),window.addEventListener("resize",s.resize)}}},h=u,v=a(845),d=(0,v.A)(h,s,n,!1,null,"56157369",null),m=d.exports},2407:function(t,e,a){a.d(e,{n7:function(){return n},of:function(){return s},zB:function(){return i}});a(4114);function s(t,e){const a=JSON.parse(JSON.stringify(t)),n=Object.keys(t);return n.forEach((n=>{-1!==[null,void 0,""].indexOf(a[n])?delete a[n]:e&&"object"===typeof t[n]&&!Array.isArray(t[n])&&(a[n]=s(a[n]))})),a}function n(t,e){if(!t)return"";const a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=new Date(t),n=s.getFullYear(),i=String(s.getMonth()+1).padStart(2,0),r=a[s.getMonth()],o=String(s.getDate()).padStart(2,0),c=String(s.getHours()).padStart(2,0),l=String(s.getMinutes()).padStart(2,0),u=String(s.getSeconds()).padStart(2,0);switch(e){case"slash":return`${n}/${i}/${o}`;case"year":return`${n}`;case"month":return`${n}-${r}`;case"monthsh":return`${n}/${i}`;case"day":return`${o}-${i}-${n}`;case"timestamp":return`${n}${i}${o}${c}${l}`;case"obj":return{y:n,m:i,d:o,h:c,min:l,s:u};case"normal":return`${n}-${i}-${o} ${c}:${l}:${u}`;case"normalHours":return`${n}-${i}-${o} ${c}`;case"normalMin":return`${n}-${i}-${o} ${c}:${l}`;case"normalDay":return`${n}-${r}-${o}`;case"normalDay2":return`${n}-${i}-${o}`;default:return`${i}-${o}-${n} ${c}:${l}`}}const i=()=>{let t=["#73A0FA","#73DEB3","#7585A2","#F7C739","#EB7E65","#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc","#379392","#4F86C6","#4F86C6","#6C49B8","#67D5B5","#EE7785","#C89EC4","#84B1ED"];return t}},597:function(t,e,a){t.exports=a.p+"img/select.566d2950.svg"},7845:function(t,e,a){t.exports=a.p+"img/icon_4.66c1ca19.svg"},6212:function(t,e,a){t.exports=a.p+"img/icon_5.cfa11238.svg"}}]);